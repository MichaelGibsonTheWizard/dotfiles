jC.prototype.cj=ea(101,function(){return V(this,2)});qL.prototype.cj=ea(100,g("F"));iY.prototype.cj=ea(99,function(){return V(this,1)});kY.prototype.cj=ea(98,function(){return V(this,1)});nY.prototype.cj=ea(97,function(){return V(this,2)});sY.prototype.cj=ea(96,function(){return V(this,1)});DY.prototype.cj=ea(95,function(){return V(this,1)});
aZ.prototype.cj=ea(94,function(a){var b=this,c=new Fz;c.Yh=!0;var d=c.serialize(a);return new Qe(function(a,f){bZ(b,"/dbx/getExecutionStatus",d,function(b){c.Yh=!1;b=c.yd(DY.Ca(),b.hf());a(b)},function(){f()})})});function F3d(a,b){return a.C[b]||null}
function G3d(a,b){var c=new Fz;c.Yh=!0;var d=Lo(c.serialize(b));return new Qe(function(b,f){nw(ou(Xw(ow(px(pu(a.C.jf("/dbx/createConnection"),"POST")),1).setTimeout(3E4),["data",d]),function(a){c.Yh=!1;a=c.yd(gY.Ca(),a.hf());a.Xq()?f(a):b(a)}),function(){var a=new gY;X(a,1,!1);X(a,3,1);f(a)}).Oe()})}
function H3d(a,b){var c=new Fz;c.Yh=!0;var d=c.serialize(b);return new Qe(function(b,f){bZ(a,"/dbx/createQuery",d,function(a){c.Yh=!1;a=c.yd(iY.Ca(),a.hf());3==a.cj().getState()?f(a):b(a)},function(){var a=new iY,b=new Oz;X(a,1,b);b.ub(3);X(b,2,1);f(a)})})}function I3d(a,b){var c=new Fz;c.Yh=!0;var d=Lo(c.serialize(b));return new Qe(function(b,c){nw(ou(Xw(ow(px(pu(a.C.jf("/dbx/importConnection"),"POST")),1).setTimeout(3E4),["data",d]),function(){b()}),function(){c()}).Oe()})}
function J3d(a,b){var c=new Fz;c.Yh=!0;var d=c.serialize(b);return new Qe(function(b,f){bZ(a,"/dbx/previewQuery",d,function(a){c.Yh=!1;a=c.yd(kY.Ca(),a.hf());3==a.cj().getState()?f(a):b(a)},function(){var a=new kY,b=new Oz;X(a,1,b);b.ub(3);X(b,2,1);f(a)})})}
function K3d(a,b){var c=new Fz;c.Yh=!0;var d=c.serialize(b);return new Qe(function(e,f){bZ(a,"/dbx/refreshSheets",d,function(a){c.Yh=!1;a=c.yd(mY.Ca(),a.hf());Fx(a,1).some(function(a){return 3==a.cj().getState()})?f(a):e(a)},function(){var a=new mY,c=new Oz;c.ub(3);X(c,2,1);Fx(b,1).forEach(function(b){var d=new nY;X(d,1,b);X(d,2,c);Dx(a,1,d)});f(a)})})}
function L3d(a,b){var c=new Fz;c.Yh=!0;var d=c.serialize(b);return new Qe(function(b,f){bZ(a,"/dbx/editQuery",d,function(a){c.Yh=!1;a=c.yd(sY.Ca(),a.hf());3==a.cj().getState()?f(a):b(a)},function(){var a=new sY,b=new Oz;X(a,1,b);b.ub(3);X(b,2,1);f(a)})})}function M3d(a){var b=new Fz;return new Qe(function(c,d){nw(ou(ow(px(pu(a.C.jf("/dbx/listConnections"),"GET")),1).setTimeout(3E4),function(a){b.Yh=!1;a=b.yd(v5c.Ca(),a.hf());c(a)}),d).Oe()})}
function N3d(a,b){var c=new Fz;c.Yh=!0;var d=Lo(c.serialize(b));return new Qe(function(b,f){nw(ou(Xw(ow(px(pu(a.C.jf("/dbx/getQuery"),"POST")),1).setTimeout(3E4),["data",d]),function(a){c.Yh=!1;a=c.yd(BY.Ca(),a.hf());V(a,1)?b(a):f("Query is not found")}),f).Oe()})}
function O3d(a,b){var c=new Fz;c.Yh=!0;var d=c.serialize(b);return new Qe(function(b,f){bZ(a,"/dbx/getBigQueryProjects",d,function(a){c.Yh=!1;a=c.yd(yY.Ca(),a.hf());a.Xq()&&f(a);b(a)},function(){var a=new kY,b=new Oz;X(a,1,b);b.ub(3);X(b,2,1);f(a)})})}function P3d(a){nf(this,a,0,-1,null,null)}w(P3d,mf);function Q3d(a,b,c){b=void 0===b?"":b;c=void 0===c?"dataconnector-querytype-raw":c;this.C=[];for(var d=0;d<a.length;d++)this.C.push(a[d].clone());this.F=b;this.D=c};function R3d(a){a=a.jDb;var b='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-section")+'"><h3 class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-header")+'">';b=b+"Billing project"+('</h3><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper")+'"></div>'+(a?'<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-radio-group")+'"><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")+
'"></div><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")+'"></div></div>':"")+"</div>");return P(b)}
function S3d(){var a='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper")+'"><p>';a=a+'Your use of BigQuery is governed by the Google Cloud Platform <a href="https://cloud.google.com/terms/" target="_blank">Terms of Service</a>.'+('</p></div><div class="'+Q("waffle-dataconnector-footer-sharing-message")+'">');return P(a+'<span>The data you query is visible to everyone with view access, but your query is only visible to people with edit access. <a href="https://support.google.com/docs/answer/9077536" target="_blank">Learn more</a></span></div>')}
;function T3d(a){a=a||{};var b=a.color;a="";b=Ss(b,null)?"#D0021B":b;a+='<svg class="waffle-dataconnector-error-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="'+Q(b)+'" fill-rule="evenodd" d="M9,13 L11,13 L11,15 L9,15 L9,13 Z M9,5 L11,5 L11,11 L9,11 L9,5 Z M9.99,0 C4.47,0 0,4.48 0,10 C0,15.52 4.47,20 9.99,20 C15.52,20 20,15.52 20,10 C20,4.48 15.52,0 9.99,0 Z M10,18 C5.58,18 2,14.42 2,10 C2,5.58 5.58,2 10,2 C14.42,2 18,5.58 18,10 C18,14.42 14.42,18 10,18 Z"></path></g></svg>';
return P(a)}
function U3d(){return P('<svg class="waffle-dataconnector-bigquery-icon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="#000000" fill-rule="evenodd" d="M17.6210231,14.9676464 C17.7267041,14.964158 17.8336481,14.999598 17.9136667,15.0739664 L21.2187334,18.1431672 C21.3715333,18.2853017 21.3715333,18.5181274 21.2187334,18.6604475 L19.8908,19.8929813 C19.7375334,20.0356729 19.4867333,20.0356729 19.3334666,19.8929813 L16.0288667,16.8252043 C15.9483809,16.7504669 15.9100327,16.6511429 15.9138223,16.5530387 C14.5318646,17.5088871 12.8185327,18.0746254 10.962963,18.0746254 C6.38121025,18.0746254 2.66666667,14.6253786 2.66666667,10.3707987 C2.66666667,6.11585235 6.38121025,2.66666667 10.962963,2.66666667 C15.5447814,2.66666667 19.259325,6.11585235 19.2592593,10.3708597 C19.2592593,12.0936892 18.6501585,13.6844725 17.6210231,14.9676464 Z M10.9627632,16.1481946 C14.3991593,16.1481946 17.1851852,13.5615621 17.1851852,10.3706486 C17.1851852,7.17973497 14.3992258,4.59254616 10.9627632,4.59254616 C7.52630064,4.59254616 4.74074074,7.17967314 4.74074074,10.3706486 C4.74074074,13.561624 7.52630064,16.1481946 10.9627632,16.1481946 Z M6.81481481,10.3703704 L8.88888889,10.3703704 L8.88888889,14.0029401 C8.03391111,13.6464441 7.31942754,13.1505168 6.81481481,12.5594013 L6.81481481,10.3703704 Z M9.92592593,8.44442896 L12,8.44442896 L12,14.1665272 C11.6766072,14.200082 11.3475683,14.2222532 11.0093815,14.2222532 C10.6390341,14.2222532 10.2784063,14.1975885 9.92592593,14.1574203 L9.92592593,8.44442896 Z M13.044326,11.3333411 L15.1184,11.3333411 L15.1184,12.4901418 C14.6287957,13.0790718 13.9116201,13.5742789 13.044326,13.933362 L13.044326,11.3333411 Z"></path></g></svg>')}
function V3d(a){a=a||{};var b=a.opacity;a="";b=Ss(b,null)?1:b;a+='<svg class="waffle-dataconnector-menu-icon" fill="#000000" fill-opacity="'+Q(b)+'" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>';return P(a)};function W3d(){var a=P,b='<div class="'+Q("waffle-dataconnector-modal-header")+'"><div class="'+Q("waffle-dataconnector-modal-title")+'" role="heading"></div><div class="'+Q("waffle-dataconnector-modal-close-button")+'" tabindex="0" role="button">';var c=P('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z M0,0 L18,0 L18,18 L0,18 L0,0 Z"/><polygon fill="#000" points="14.53 4.53 13.47 3.47 9 7.94 4.53 3.47 3.47 4.53 7.94 9 3.47 13.47 4.53 14.53 9 10.06 13.47 14.53 14.53 13.47 10.06 9"/></g></svg>');
return a(b+c+'</div></div><div class="'+Q("waffle-dataconnector-modal-body")+'"></div><div class="'+Q("waffle-dataconnector-modal-footer")+'"></div>')};function C4(a,b){a=void 0===a?"":a;lt.call(this,!1,b);this.Jb=a;this.C=new Wr(void 0,X3d.getInstance());this.Ha(this.C);vn(this.C,"Close");this.pb=null;this.gb=!0}r(C4,lt);p=C4.prototype;
p.Ea=function(){lt.prototype.Ea.call(this);var a=this.getId();Fk(this.Qa(),"labelledby",a);Ek(this.Qa(),"dialog");J(this.getElement(),"waffle-dataconnector-modal");this.Jb&&J(this.getElement(),this.Jb);Ks(this.getElement(),W3d);this.Ka("waffle-dataconnector-modal-title").id=a;a=this.Sq();J(a,"waffle-dataconnector-modal-bg");K(a,this.gb);this.C.Wa(this.Ka("waffle-dataconnector-modal-close-button"));this.pb&&Y3d(this)};
p.Ja=function(){lt.prototype.Ja.call(this);Z3d(this);this.getHandler().V(this.C,"action",this.rX);this.getHandler().V(this.Qa(),["keydown","keypress"],this.lHb)};p.tb=function(){return this.ib("waffle-dataconnector-modal-body")};function $3d(a){return a.ib("waffle-dataconnector-modal-footer")}function a4d(a,b){a.pb=b;a.sb()&&Y3d(a)}function Z3d(a){var b=a.va(),c=a.Sq(),d=a.Yo;a.gb?(d&&b.Yq(d,a.getElement()),b.Yq(c,a.getElement())):(b.Af(d),b.Af(c))}p.rX=function(){psb.Ob()};p.z5=function(){psb.Ob()};
p.lHb=function(a){"keydown"==a.type?27==a.keyCode?this.z5():9==a.keyCode&&a.shiftKey&&a.target==this.getElement()&&qRa(this):this.yEa(a)};function Y3d(a){Xl.getInstance().setContent(a.Ka("waffle-dataconnector-modal-title"),a.pb)}p.yEa=ba();function X3d(){}r(X3d,Vr);X3d.prototype.sp=n("waffle-dataconnector-modal-close-button");va(X3d);function b4d(a,b){C4.call(this,a,b);this.H=Ve()}r(b4d,C4);p=b4d.prototype;p.getResult=function(){return this.H.C};p.resolve=function(a){this.H.resolve(a)};p.reject=function(a){this.H.reject(a)};p.Ia=function(){C4.prototype.Ia.call(this);this.H.reject()};p.z5=function(){this.reject()};p.rX=function(){this.reject()};var c4d=new Yu(1);function d4d(a){var b=1024<=a;a=b?RYc(parseInt(a,10)):a;return(new $u("{AT_LEAST_ONE_KB, select, \n     true {Will process {BYTES}.}\n     other {\n         {BYTES, plural,\n             =0 {Will process # bytes.}\n             =1 {Will process # byte.}\n             other {Will process # bytes.}}}}")).format({AT_LEAST_ONE_KB:b?"true":"false",BYTES:a})}
function e4d(){var a=new lr,b="Configure a project in the Google Cloud Platform console to continue. "+(a.Ae("a",{"class":"goog-inline-block",href:"https://sites.google.com/corp/google.com/sheets-data-connectors-tt-help/bigquery-projects",target:"_blank"})+("Learn more"+a.De("a")));return a.format(b)};function f4d(a,b){b4d.call(this,"waffle-dataconnector-bigqueryquerysettingsdialog",b);a4d(this,this.va().Ea("SPAN",void 0,N(U3d),"BigQuery data connection"));this.J=a.C;this.D=new cT;this.Ha(this.D);this.D.Nd("waffle-dataconnector-bigqueryquerysettingsdialog-project-select");vn(this.D,"Billing project");a=this.D;a.F="Select a project";a.Kx();this.L=new GX(this.va(),"Raw data");this.oa=new GX(this.va(),"Pivot table");this.O=new IX([this.L,this.oa]);this.F=new cY("Write query");this.Ha(this.F);this.F.Nd("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button")}
r(f4d,b4d);
f4d.prototype.Ea=function(){b4d.prototype.Ea.call(this);var a=I(H(),"fedp");Ks(this.tb(),R3d,{jDb:a});Ks($3d(this),S3d);this.D.render(this.Ka("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper"));this.F.render(this.Ka("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper"));a&&(this.L.render(this.Ka("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")),this.oa.render(this.Ka("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")),JX(this.O,
this.L))};f4d.prototype.Ja=function(){b4d.prototype.Ja.call(this);if(0==this.J.length){this.D.Pa(!1);var a=this.D;a.F="No billing projects";a.Kx();a=this.va();var b=re(a,e4d());a.appendChild(this.Ka("waffle-dataconnector-bigqueryquerysettingsdialog-project-section"),a.Ea("DIV","waffle-dataconnector-bigqueryquerysettingsdialog-error-caption",b))}else{a=this.J;for(b=0;b<a.length;b++){var c=a[b];this.D.kd(new Kn(g4d(c),c.getId()))}this.getHandler().V(this.F,"action",this.Da).V(this.D,"change",this.Aa)}this.Aa()};
f4d.prototype.Aa=function(){this.F.Pa(null!=this.D.Ye())};f4d.prototype.Da=function(){this.resolve(h4d(this))};function h4d(a){var b=a.D.Ye().getValue(),c="dataconnector-querytype-raw";I(H(),"fedp")&&"Pivot table"==KX(a.O).getLabel()&&(c="dataconnector-querytype-pivot");return new Q3d(a.J,b,c)}function g4d(a){var b=a.getName();a=a.getId();return b+" ["+a+"]"};function i4d(a,b){this.D=a;this.C=b}function j4d(a){var b=new D5c;X(b,1,a.C);return O3d(a.D,b).then(function(a){return Fx(a,4)})};function D4(a,b){mt.call(this,"waffle-dataconnector-prompt",a,b);this.L=Ve();zt(this,null);yt(this,!0);this.C=new kW("Continue");this.Ha(this.C);this.J=new lW("Cancel");this.Ha(this.J);this.O=[]}r(D4,mt);p=D4.prototype;p.Nd=function(a){this.O.push(a);var b=this.getElement();b&&J(b,a)};p.getResult=function(){return this.L.C};p.resolve=function(a){this.L.resolve(a)};p.reject=function(){this.L.reject()};p.Ea=function(){mt.prototype.Ea.call(this);var a=st(this);this.J.render(a);this.C.render(a);K(a,!0)};
p.Ja=function(){var a=this;mt.prototype.Ja.call(this);Lk(this.Qa(),this.O);this.getHandler().V(this.J,"action",function(){return a.reject()})};p.setVisible=function(a){mt.prototype.setVisible.call(this,a);a||this.reject()};p.Ia=function(){mt.prototype.Ia.call(this);this.reject()};function k4d(a,b){D4.call(this,a,b)}r(k4d,D4);k4d.prototype.Ja=function(){var a=this;D4.prototype.Ja.call(this);this.getHandler().V(this.C,"action",function(){return a.resolve(0)})};function l4d(a){return P('<div class="'+Q("waffle-dataconnector-connectioncard")+'" role="button" tab-index="0"><div class="'+Q("waffle-dataconnector-connectioncard-icon")+'"></div><div class="'+Q("waffle-dataconnector-connectioncard-body")+'"><div class="'+Q("waffle-dataconnector-connectioncard-header")+'">'+O(a.uda)+"</div></div></div>")};function m4d(a,b,c,d){this.Yc=a;this.D=b;this.F=c;this.C=d}m4d.prototype.getName=g("D");m4d.prototype.getId=g("Yc");m4d.prototype.getType=g("F");function n4d(){this.F=this.Yc=this.D=null;this.C=!1}n4d.prototype.Ie=function(a){this.D=a;return this};n4d.prototype.Ze=function(a){this.Yc=a;return this};n4d.prototype.setType=function(a){this.F=a;return this};function o4d(a){a.C=!0;return a}n4d.prototype.build=function(){return new m4d(this.Yc,this.D,this.F,this.C)};function p4d(){}r(p4d,Vr);p4d.prototype.Ea=function(a){a=a.Ta();var b=N(l4d,{uda:a.getName()});Sk(b,"waffle-dataconnector-connectioncard-authenticated",a.C);return b};p4d.prototype.Tb=n("waffle-dataconnector-connectioncard");va(p4d);function q4d(a,b){Wr.call(this,void 0,p4d.getInstance(),b);this.gc(a);this.ef(8,!0)}r(q4d,Wr);q4d.prototype.gc=function(a){Wr.prototype.gc.call(this,a)};function r4d(){return P('<div class="'+Q("waffle-dataconnector-connectionmanager-content")+'"><div class="'+Q("waffle-dataconnector-connectionmanager-connections")+'"><div class="'+Q("waffle-dataconnector-connectionmanager-authorized")+'"></div></div></div>')};function s4d(){return P('<div class="'+Q("waffle-dataconnector-dialog-progress-message")+'"><div class="'+Q("waffle-dataconnector-dialog-progress-label")+'"></div><div class="'+Q("waffle-dataconnector-dialog-progress-bar")+'"></div></div>')};function t4d(a){rU.call(this,a);this.F=!1}r(t4d,rU);t4d.prototype.Ea=function(){rU.prototype.Ea.call(this);J(this.getElement(),"waffle-progress-bar");Sk(this.getElement(),"waffle-indeterminate-progress-bar",this.F)};function u4d(a,b){a.F!=b&&(a.F=b,a.getElement()&&Sk(a.getElement(),"waffle-indeterminate-progress-bar",b))}t4d.prototype.setValue=function(a){u4d(this,!1);rU.prototype.setValue.call(this,a)};function E4(a,b){mt.call(this,"waffle-dataconnector-dialog",a,b);zt(this,null);this.Sw(!1);yt(this,!0);this.Ya=[];this.oa=new kW("Ok");this.Ha(this.oa);this.O=new lW("Cancel");this.Ha(this.O);this.Na=new Cm;this.Ra=Pm(new Om,1).build();this.Aa=this.va().Ea("DIV","waffle-dataconnector-dialog-error-message");this.Da=this.va().Ea("DIV","waffle-dataconnector-dialog-info-message");this.Sa=N(s4d);this.C=new t4d;u4d(this.C,!0);this.Ha(this.C)}r(E4,mt);
E4.prototype.Ea=function(){mt.prototype.Ea.call(this);Lk(this.Qa(),this.Ya);var a=st(this),b=this.va().Ea("DIV","waffle-dataconnector-dialog-button-wrapper");a.appendChild(b);this.O.render(b);this.oa.render(b);K(a,!0);b=this.va().Ea("DIV","waffle-dataconnector-dialog-message-container",this.Aa,this.Da,this.Sa);a.appendChild(b);this.C.render(this.Ka("waffle-dataconnector-dialog-progress-bar"));Ks(uRa(this),uYc)};
E4.prototype.Ja=function(){mt.prototype.Ja.call(this);var a=this.Ka("waffle-dataconnector-dialog-error-message");hd(a,$c(""));K(a,!1);a=this.Ka("waffle-dataconnector-dialog-info-message");hd(a,$c(""));K(a,!1);this.C.setValue(0);u4d(this.C,!0);K(this.Ka("waffle-dataconnector-dialog-progress-message"),!1);Fk(this.Aa,"live","polite");Fk(this.Da,"live","polite");Fk(this.Sa,"live","polite")};E4.prototype.Sw=function(a){mt.prototype.Sw.call(this,a);ut(this,this.eJ?0:.6)};function v4d(a,b){E4.call(this,a,b);nt(this,"Managed connections");this.F=new us;this.Ba(this.F);this.J=new M(this.va());this.Ha(this.J);this.L=new SW;this.Ha(this.L);Gm(this.Na,this.oa,QE,Im,void 0,this.Ra);Gm(this.Na,this.O,psb,Im,void 0,this.Ra)}r(v4d,E4);v4d.prototype.Ea=function(){E4.prototype.Ea.call(this);Ks(this.tb(),r4d)};
v4d.prototype.Ja=function(){E4.prototype.Ja.call(this);this.L.render(this.Ka("waffle-dataconnector-connectionmanager-content"));this.J.Wa(this.Ka("waffle-dataconnector-connectionmanager-connections"));this.getHandler().V(this.J,"action",this.Ua).V(this.F,"select",this.$a);w4d(this,!0)};function w4d(a,b){Sk(a.Qa(),"waffle-dataconnector-connectionmanager-loading",b);a.L.setActive(b)}
function x4d(a,b){var c=a.Ka("waffle-dataconnector-connectionmanager-authorized");b=ia(b);for(var d=b.next();!d.done;d=b.next())d=new q4d(d.value),a.J.Ha(d),d.render(c)}v4d.prototype.Ua=function(a){a.stopPropagation();vs(this.F,a.target)};v4d.prototype.$a=function(){var a=(a=(a=this.F.Ye())&&a)&&a.Ta();QE.setValue(a)};function y4d(){z.call(this);this.C={};this.D=new Fz}r(y4d,z);function z4d(a,b,c){a.C[b]=c}function A4d(a,b){var c=ritz_api.DbxApi.getExecutionStatusForQuery(b);c=null==c?null:a.D.yd(Oz.Ca(),c);var d=a.C[b];return d?c&&d.getToken()==c.getToken()?(rc(a.C,b),c):d:c};function B4d(a){switch(a){case 2:var b=1;break;case 3:b=2;break;default:b=0}a=new P3d;G(a,1,b);b=new bk;xf(b,91,a);return b};function C4d(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-button")+'">';var b=P('<svg class="waffle-dataconnector-info-icon-filled" fill="#000000" fill-opacity="0.54" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>');
a=a+O(b)+'</span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-message")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-spinner")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")+'">';a+="Error";b=P('<svg class="waffle-dataconnector-refresh-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><polygon points="0 0 18 0 18 18 0 18"/><path fill="#000" d="M9,13.5 C6.51,13.5 4.5,11.49 4.5,9 C4.5,6.51 6.51,4.5 9,4.5 C10.24,4.5 11.36,5.02 12.17,5.83 L10,8 L15,8 L15,3 L13.24,4.76 C12.15,3.68 10.66,3 9,3 C5.69,3 3.01,5.69 3.01,9 C3.01,12.31 5.69,15 9,15 C11.97,15 14.43,12.84 14.9,10 L13.38,10 C12.92,12 11.14,13.5 9,13.5 L9,13.5 Z"/></g></svg>');
a+="</span></span>"+O(b);return P(a+"Refresh query</div>")}
function D4d(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-editquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'">';var b=P('<svg class="waffle-dataconnector-edit-icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');a+=O(b);return P(a+
"Edit query</div>")}function E4d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-viewerror")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(T3d({color:"#000000"},b));return P(a+"View error</div>")}function F4d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-bigquery-helpdoc")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(U3d(null,b));return P(a+"Learn more about BigQuery</div>")};function G4d(a,b,c,d,e){Kn.call(this,N(C4d),a,e);this.Oa=b;this.R=c;this.Da=d;this.O=Pm(new Om,72).build();this.C=new Wr(void 0,$l(Vr,"waffle-dataconnector-pill-menuitem-refreshquery-info-button"),this.va());this.Ha(this.C);this.F=new Wr(void 0,$l(Vr,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"),this.va());this.Ha(this.F);this.H=!1;this.Nz(73)}r(G4d,Kn);p=G4d.prototype;
p.Ja=function(){Kn.prototype.Ja.call(this);J(this.Qa(),"waffle-dataconnector-pill-menuitem-refreshquery");this.C.Wa(this.Ka("waffle-dataconnector-pill-menuitem-refreshquery-info-button"));vn(this.C,"To show the query info, press I.");this.C.Qd("Show the query info");this.F.Wa(this.Ka("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"));this.reset();this.getHandler().V(this.C,"action",this.KFa).V(this.F,"action",this.kHb)};
p.Gh=function(a){return a.keyCode==this.aR?(this.H&&this.KFa(null),!0):Kn.prototype.Gh.call(this,a)};p.Kg=function(a){if(a&&Pd(a.target)){var b=this.Ka("waffle-dataconnector-pill-menuitem-refreshquery-info");if(ee(b,a.target))return!0}return Kn.prototype.Kg.call(this,a)};p.refresh=function(a){this.H=a;this.reset()};
p.reset=function(){K(this.Ka("waffle-dataconnector-pill-menuitem-refreshquery-info"),this.H);if(this.H){H4d(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-button");var a=this.Ka("waffle-dataconnector-pill-menuitem-refreshquery-info-message");hd(a,fd)}};p.kHb=function(a){a.stopPropagation();Asb.Ob(void 0,this.O)};
p.KFa=function(a){var b=this;a&&a.stopPropagation();H4d(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-spinner");this.Da.C(35737,this.O);I4d(this).then(function(a){a=V(a,2);return J4d(b,a).then(function(a){a=V(V(a,5),1);a=d4d(a);var c=b.Ka("waffle-dataconnector-pill-menuitem-refreshquery-info-message");hd(c,$c(a));H4d(b,"waffle-dataconnector-pill-menuitem-refreshquery-info-message");$H(a)},function(){return K4d(b)})},function(){return K4d(b)})};
function K4d(a){H4d(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")}function I4d(a){var b=new AY;X(b,1,a.Oa);return N3d(aZ.getInstance(),b)}function J4d(a,b){V(b,6);var c=new jY;X(c,1,a.R);a=b.clone();X(c,2,a);X(c,3,1);X(c,5,!0);return J3d(aZ.getInstance(),c)}
function H4d(a,b){["waffle-dataconnector-pill-menuitem-refreshquery-info-button","waffle-dataconnector-pill-menuitem-refreshquery-info-message","waffle-dataconnector-pill-menuitem-refreshquery-info-spinner","waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"].forEach(function(b){return K(a.Ka(b),!1)});K(a.Ka(b),!0);a.C.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-button"==b);a.F.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"==b)}
;function L4d(a,b,c,d,e){d=void 0===d?!1:d;LY.call(this,Ls(V3d,{opacity:.54}),new Qn(e),M4d.getInstance(),e);this.H=a;this.R=b;this.Oa=d;this.Da=c;this.ma=Qm(Pm(new Om,72),B4d(ritz_api.DbxApi.getTypeOfQuery(this.H))).build();this.F={};this.F["refresh-query"]=new G4d("refresh-query",this.H,this.R,this.Da,this.va());this.kd(this.F["refresh-query"]);this.F["edit-query"]=new Kn(N(D4d),"edit-query",this.va());this.kd(this.F["edit-query"]);this.F["view-error"]=new Kn(N(E4d),"view-error",this.va());this.kd(this.F["view-error"]);
this.F["menu-separator"]=new Pn(this.va());this.kd(this.F["menu-separator"]);this.F["bigquery-helpdoc"]=new Kn(N(F4d),"bigquery-helpdoc",this.va());this.kd(this.F["bigquery-helpdoc"]);this.getHandler().V(this.Zb(),"action",this.Sa)}r(L4d,LY);L4d.prototype.Ja=function(){LY.prototype.Ja.call(this);J(this.Zb().getElement(),"waffle-dataconnector-pill-menu");wAc(this,new Um(this.Qa(),this.Oa?4:0));this.Zw=!0};L4d.prototype.Sa=function(a){a=a.target.Ta();(a=N4d[a])&&a.Ob(void 0,this.ma)};
L4d.prototype.refresh=function(a){var b=[];switch(a){case 2:b.push("edit-query");b.push("refresh-query");break;case 3:b.push("view-error")}if(a=3==ritz_api.DbxApi.getTypeOfQuery(this.H))b.push("menu-separator"),b.push("bigquery-helpdoc");this.F["refresh-query"].refresh(a);a=ia(Object.values(this.F));for(var c=a.next();!c.done;c=a.next())c.value.setVisible(!1);b=ia(b);for(a=b.next();!a.done;a=b.next())this.F[a.value].setVisible(!0)};
L4d.prototype.Id=function(a,b){if(a){var c=this.Zb();if(c&&c.sb()){c=ia(Object.values(this.F));for(var d=c.next();!d.done;d=c.next())d=d.value,d.reset&&d.reset()}}LY.prototype.Id.call(this,a,b)};var O4d={},N4d=(O4d["bigquery-helpdoc"]=osb,O4d["edit-query"]=ssb,O4d["refresh-query"]=zsb,O4d["view-error"]=Asb,O4d);function M4d(){}r(M4d,k6c);M4d.prototype.Wp=function(a){return a.Ea("DIV",{style:"display:none;"})};va(M4d);function P4d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill")+'" tabindex="0"><div class="'+Q("waffle-dataconnector-pill-info")+'"><div class="'+Q("waffle-dataconnector-pill-timestamp")+'"></div><div class="'+Q("waffle-dataconnector-pill-progress")+'"><div class="'+Q("waffle-dataconnector-pill-spinner")+'"></div><span class="'+Q("waffle-dataconnector-pill-progress-message")+'">';a=a+"Running query..."+(' </span></div><div class="'+Q("waffle-dataconnector-pill-error")+'">'+O(T3d(null,
b)));a=a+"Execution error"+('</div></div><div class="'+Q("waffle-dataconnector-pill-editquery-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-refresh-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-menu-button-wrapper")+'"></div></div>');return P(a)};function Q4d(a,b,c,d,e,f,h,k){h=void 0===h?!1:h;M.call(this,k);this.O=a;this.Da=c;this.Aa=d;this.H=h;this.R=e;this.oa=f;c=ritz_api.DbxApi.getTypeOfQuery(a);this.L=Qm(Pm(new Om,72),B4d(c)).build();this.ma=new R4d;this.J=new Cm;this.Ba(this.J);this.F=new lW;this.Ha(this.F);this.F.Nd("waffle-dataconnector-pill-editquery-button");Gm(this.J,this.F,ssb,Im,void 0,this.L);this.D=new lW("Refresh");this.D.Nd("waffle-dataconnector-pill-refresh-button");this.Ha(this.D);this.C=new L4d(a,b,this.oa,this.H,this.va());
this.C.Nd("waffle-dataconnector-pill-menu-button");this.Ha(this.C)}r(Q4d,M);p=Q4d.prototype;p.Ea=function(){this.mb(N(P4d))};
p.Ja=function(){var a=this;M.prototype.Ja.call(this);Ek(this.Qa(),"toolbar");var b=this.getId()+":label";this.Ka("waffle-dataconnector-pill-info").id=b;Fk(this.Qa(),"labelledby",b);this.F.render(this.Ka("waffle-dataconnector-pill-editquery-button-wrapper"));this.D.render(this.Ka("waffle-dataconnector-pill-refresh-button-wrapper"));this.C.render(this.Ka("waffle-dataconnector-pill-menu-button-wrapper"));Bm(this.C.Qa(),"More options",void 0);this.getHandler().V(this.D,"action",this.svb).V(pe(this.va()),
"focus",this.refresh).V(this.Qa(),"keydown",function(a){var b=a.keyCode;37!=b&&39!=b||a.preventDefault()});C.Wo&&C.product.To&&this.getHandler().V(this.Qa(),"focus",function(){cl(a.Qa(),{outline:"1px dotted black"})}).V(this.Qa(),"blur",function(){cl(a.Qa(),{outline:"0"})});this.refresh();b=new gP(this.Qa(),this.va());this.Ba(b);hP(b)};p.Ia=function(){M.prototype.Ia.call(this)};p.jd=function(){this.Aa.jd(this.Qa(),this.H?5:1,new Yk(0,this.H?50:0,12,this.H?0:50))};
p.refresh=function(){var a=A4d(this.R,this.O);a=a?a.getState():2;var b=tsb.isEnabled();switch(a){case 5:case 1:K(this.Ka("waffle-dataconnector-pill-timestamp"),!1);K(this.Ka("waffle-dataconnector-pill-progress"),!0);K(this.Ka("waffle-dataconnector-pill-error"),!1);this.F.setVisible(!1);this.D.setVisible(!1);this.D.Pa(!1);this.C.setVisible(!1);break;case 4:case 2:K(this.Ka("waffle-dataconnector-pill-timestamp"),!0);K(this.Ka("waffle-dataconnector-pill-progress"),!1);K(this.Ka("waffle-dataconnector-pill-error"),
!1);S4d(this);this.F.setVisible(!1);this.D.setVisible(b);this.D.Pa(b);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);break;case 3:K(this.Ka("waffle-dataconnector-pill-timestamp"),!1);K(this.Ka("waffle-dataconnector-pill-progress"),!1);K(this.Ka("waffle-dataconnector-pill-error"),!0);this.F.setVisible(b);this.D.setVisible(!1);this.D.Pa(!1);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);b||(K(this.Ka("waffle-dataconnector-pill-timestamp"),!0),K(this.Ka("waffle-dataconnector-pill-error"),
!1),S4d(this));break;default:mIc("Unrecognized execution state: "+a)}this.jd()};function S4d(a){var b=ritz_api.DbxApi.getLastExecutionTimeForSheet(a.Da);0>=b||(b="Updated "+a.ma.format(b),a=a.Ka("waffle-dataconnector-pill-timestamp"),ge(a,b))}p.svb=function(){this.D.Pa(!1);zsb.Ob(void 0,this.L)};p.focus=function(){this.Qa().focus()};function R4d(){this.C=new Su(1);this.D=new Su(Vu.MONTH_DAY_MEDIUM);this.F=new Su(7)}
R4d.prototype.format=function(a){a=new Date(a);var b=new Date,c;0<b.getFullYear()-a.getFullYear()?c=this.C.format(a):a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()?c="today":c=this.D.format(a);a=this.F.format(a);return c+(", "+a)};function T4d(a,b,c,d,e,f,h){z.call(this);this.D=a;this.H=b;this.L=c;this.ma=d;this.J=e;this.Ma=new Vk(this);this.Ba(this.Ma);this.F=new xe(this);this.Ba(this.F);this.O=f;this.R=h;this.C=null;this.Ma.V(this.L,"F",this.iHb).V(this.D,"eb",this.jHb).V(this.D,"fb",this.Dxb).V(this.ma,"db-execution-status-updated",this.hHb).V(this.D,"xb",this.refresh);this.F.subscribe(usb,"action",this.Tmb)}r(T4d,z);p=T4d.prototype;p.Ia=function(){z.prototype.Ia.call(this);A(this.C)};p.refresh=function(){U4d(this)};
p.iHb=function(){this.C&&this.C.jd()};p.jHb=function(){U4d(this)};p.Dxb=function(){A(this.C);this.C=null};p.Tmb=function(){this.C&&(this.C.focus(),this.O.ub(2))};function U4d(a){var b=a.D.C.C;if(b&&yI(b))if(a.C)a.C.refresh();else{var c=nI(a.H);if(c){b=c.qe();c=new Um(c.La.J,b?5:1);var d=a.D.C.C,e=d.H,f=V(e,1);e=V(e,2);d=d.jb();a.C=new Q4d(f,e,d,c,a.J,a.R,b);a.C.render()}}}p.hHb=function(a){a.F&&0!=a.F.length&&this.C&&bb(a.F,this.C.O)&&this.C.refresh()};function V4d(a,b,c,d){z.call(this);this.ma=a;this.oa=b;this.Aa=c;this.O=this.J=this.L=null;this.D=d||null;this.C=3;this.R=new W4d;this.F=this.H=null}r(V4d,z);p=V4d.prototype;p.getId=function(){return Ca(this)};p.Ia=function(){this.stop();z.prototype.Ia.call(this)};p.start=function(){this.C=2;this.F=this.H=null;this.Tya(this.ma)};p.stop=function(){2==this.C&&(this.C=3,this.R.stop())};function X4d(a,b){a.L=b;return a}function Y4d(a,b){a.J=b;return a}function Z4d(a,b){a.O=b;return a}
p.Tya=function(a){var b=this;this.oa.call(this.D,a).then(function(a){if(2==b.C){b.H=a;b.F=null;var c=b.Aa.call(b.D,a);if(c){b.O&&b.O.call(b.D,a);a:{a=b.R;c=u(b.Tya,b,c);if(10>a.F){a.F++;var e=1E3}else if(60>a.D)a.D++,e=5E3;else{a=!1;break a}e+=Math.round(.2*e*(Math.random()-.5)*2);a.C=fm(c,e);a=!0}a||$4d(b,Error("Polling timed out"))}else b.stop(),b.C=4,b.H=a,b.F=null,b.L&&b.L.call(b.D,a)}},function(a){2==b.C&&$4d(b,a)})};function $4d(a,b){a.stop();a.C=1;a.H=null;a.F=b;a.J&&a.J.call(a.D,b)}
p.getStatus=g("C");p.cF=g("F");function W4d(){this.D=this.F=0;this.C=null}W4d.prototype.stop=function(){this.D=this.F=0;gm(this.C);this.C=null};function a5d(a){this.C=a}function b5d(a,b){var c=V(b,2);return new V4d(b,function(b){return J3d(a.C,b)},function(a){if(1==a.cj().getState()){var b=new jY;X(b,2,c);b.setToken(a.cj().getToken());return b}return null})};function c5d(a,b){it(a.Pc,d5d(a));a.C="vertical"==a.D?aRa(a.Pc,b):bRa(a.Pc,b);var c=ia("vertical"==a.D?[a.C,0]:[0,a.C]);b=c.next().value;c=c.next().value;NG(a.Qa(),b,c,a.qe());a.dispatchEvent("Ff")}function d5d(a){var b=a.Qa().parentElement.getBoundingClientRect(),c=b.height;b=b.width;"horizontal"==a.D?(b=0,c-=a.cd()):(c=0,b-=a.cd());return new Zk(0,0,b,c)};function e5d(a,b){var c=b.getErrorCode(),d=V(b,3);switch(c){case 20:return f5d(a,d);case 14:return F4('Update parameter "'+(V(b,6).toUpperCase()+'" to reference a cell in the current workbook and try again'));case 15:return F4('Update the cell referenced by parameter "'+(V(b,6).toUpperCase()+'" to be text or a number'));case 16:return F4("Select a parameter name you haven't used before");case 13:return F4('Define your parameter "'+(V(b,6).toUpperCase()+'" and try again'));case 6:return I(H(),"docs-idu")?
(a=new lr,b=a.Ae("span",{"class":"waffle-dataconnector-error-message"})+("Query timed out. "+(a.Ae("a",{href:"https://sites.google.com/corp/google.com/sheets-dataconnectors-help/error-messages",target:"_blank"})+("Learn more"+(a.De("a")+a.De("span"))))),a=a.format(b)):a=g5d("Query timed out",d),a;case 8:return I(H(),"docs-idu")?(a=new lr,b="Results exceed "+(h5d+(" rows. Update query and run again. "+(a.Ae("a",{href:"https://sites.google.com/corp/google.com/sheets-dataconnectors-help/error-messages",
target:"_blank"})+("Learn more"+a.De("a"))))),a=a.format(b),a=F4(a)):a=g5d(i5d,d),a;case 18:return F4("The query returns an ARRAY or a STRUCT type, which is currently not supported.");case 9:return a=new lr,b="Go to Plx to specify an engine other than 'Auto' and try again. "+(a.Ae("a",{href:"https://sites.google.com/corp/google.com/sheets-dataconnectors-help/error-messages",target:"_blank"})+("Learn more"+a.De("a"))),a=a.format(b),F4(a);case 19:return F4("The query is already in execution.");case 17:return a=
"Can not insert the results of the query: that would increase the number of cells in the workbook above the limit of "+(jh(H(),"fmtc")+" cells."),F4(a);case 22:return F4("Duplicated column names or aliases are not supported. Please update your query.");case 23:return F4("There is no sheet associated with this query.")}return j5d(d)}
function k5d(a){var b=new lr;a=(new $u("To execute this query, {startLink}sign in to your Google account{endLink}")).format({startLink:b.Ae("a",{href:"#",id:a}),endLink:b.De("a")});return b.format(a)}function f5d(a,b){if(!b)return j5d(b);switch(a){case 2:return F4("Plx error: "+b);case 3:return F4("BigQuery error: "+b);default:return F4("Database error: "+b)}}function j5d(a){return g5d("Something's wrong. Please try again later",a)}var h5d=(new Yu(1)).format(1E4),i5d="Results exceed "+(h5d+" rows. Update query and run again.");
function F4(a){return cd("span",{"class":"waffle-dataconnector-error-message"},a)}function g5d(a,b){var c=new lr;b&&(a=a+": "+b);return F4(c.format(a))};function l5d(){}r(l5d,Vr);l5d.prototype.Tb=n("waffle-dataconnector-queryeditor-removable-chip-remove-button");va(l5d);function m5d(){}r(m5d,Vr);m5d.prototype.Ea=function(a){var b=Vr.prototype.Ea.call(this,a);a.va().appendChild(b,a.va().Ea("DIV","waffle-dataconnector-queryeditor-removable-chip-chip-content"));return b};m5d.prototype.tb=function(a){return Jd("waffle-dataconnector-queryeditor-removable-chip-chip-content",a)};m5d.prototype.Tb=n("waffle-dataconnector-queryeditor-removable-chip-button");
va(m5d);var n5d=new Fz;function o5d(a){return a.C.Dd().map(function(a){return a.Ta()})};function p5d(){z.call(this);this.C=Nd()}r(p5d,z);function q5d(a,b){a.C.dataConnectorOnCompleteAuth=b;b=(new ro(a.C.location.href)).resolve(new ro("dbx/ssoLogin")).toString();var c=Ld();(a=nr(b,{target:"google_popup",width:500,height:500,top:Math.floor((c.height-500)/2),left:Math.floor((c.width-500)/2),toolbar:!1,menubar:!1,location:!1,statusbar:!1},a.C))&&a.focus()}p5d.prototype.Ia=function(){delete this.C.dataConnectorOnCompleteAuth;z.prototype.Ia.call(this)};function r5d(a){var b=a.Vga(),c;if(c=b){a=ia(o5d(a.Ya));for(c=a.next();!c.done;c=a.next())Dx(b,3,c.value);c=b}return c}function s5d(a){a.J.setVisible(!0);var b=Math.min(a.J.Z$a().height+16,240);t5d(a,b)}function u5d(a){if(!a.O.enabled){var b=0;v5d(a,b);a.O.V("tick",function(){a.isDisposed()||(b+=.1,v5d(a,b))});a.O.start()}}function v5d(a,b){G4(a,$c("Executing query "+(b.toFixed(1)+"s")))}function w5d(a,b){a.Sa=!1;a.O.stop();a.O.sC();x5d(a,!0);y5d(a,b.cj());z5d(a)}
function y5d(a,b){10==b.getErrorCode()?A5d(a):G4(a,e5d(a.nG(),b))}function B5d(a){a.Sa=!0;G4(a,$c("Updating workbook"));z5d(a)}function t5d(a,b){var c=void 0===c?!0:c;A(a.Aa);a.Aa=null;c?(c=C5d(a),a.Aa=new D5d(c,b,200,a),a.Ba(a.Aa),a.Aa.play()):E5d(a,b)}function C5d(a){return a.sb()?wl(a.Ka("waffle-dataconnector-newqueryeditor-preview-pane")).height:0}function E5d(a,b){var c=a.Ka("waffle-dataconnector-newqueryeditor-main");b=wl(c).height-a.F.cd()-b;c5d(a.F,b)}
function z5d(a){var b=r5d(a),c=a.$a.C;a.Sa||null==b||c?(a.Na.Pa(!1),a.oa.Pa(!1)):(a.oa.Pa(!0),a.Na.Pa(!0));b=a.fb&&a.fb.equals(b);a.J.Aoa(!b)}function F5d(a){var b=new jY;X(b,1,a.Vb);a=r5d(a);X(b,2,a);X(b,3,30);return b}function A5d(a){var b="waffle-dataconnector-ssologin-"+Yb(),c=k5d(b);G4(a,c);(b=Fd(b))&&a.getHandler().V(b,"click",function(){return G5d(a)})}function G5d(a){q5d(a.Wc,function(){x5d(a,!1);PE.Ob(F5d(a),a.gw)})}
function G4(a,b,c){c=void 0===c?!0:c;a=a.Ka("waffle-dataconnector-newqueryeditor-footer-message");hd(a,b);c&&$H(ie(a))}function x5d(a,b){a.sb()&&Sk(a.Ka("waffle-dataconnector-newqueryeditor-footer-message-container"),"waffle-dataconnector-newqueryeditor-unhandled-error",b)}function D5d(a,b,c,d){Ju.call(this,[a],[b],c);this.F=d}r(D5d,Ju);D5d.prototype.d8=function(){E5d(this.F,this.coords[0])};D5d.prototype.H=function(){E5d(this.F,this.dO[0])};
var H5d=new lr,I5d="Inserted data is visible to all. The query is visible only to people with edit access. "+(H5d.Ae("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+H5d.De("a"))),J5d=H5d.format(I5d);var K5d=Object.freeze({caption:"Dremel",value:"DREMEL"}),L5d=Object.freeze({caption:"F1",value:"F1"}),M5d=Object.freeze({caption:"Procella",value:"PROCELLA"});function N5d(a,b,c,d){var e="Error in query on "+c;c=new k4d;c.Nd("waffle-dataconnector-error-popup");nt(c,e);c.C.setContent("Open query editor");c.J.setContent("Ok");a=10==a.getErrorCode()?k5d(d):e5d(b,a);ot(c,a);return c};function O5d(a,b,c,d,e,f,h,k,l){z.call(this);var m=this;this.L=new y4d;this.Ba(this.L);this.ma=a.pb;this.D=aZ.getInstance();this.Ga=new a5d(this.D);this.F=b;this.O=f;this.oa=l;this.C=null;this.R=new E;this.Ba(this.R);this.H=new T4d(b,c,d,a,this.L,e,this.oa);this.Ba(this.H);this.Ma=new Vk(this);this.Ba(this.Ma);this.Aa=new xe(this);this.Ba(this.Aa);this.Da=new p5d;this.Ba(this.Da);P5d(this,k);this.Ma.V(this.R,["show","hide"],this.gkb);this.Aa.subscribe(psb,"action",this.ida).subscribe(PE,"action",
this.nub).subscribe(NE,"action",this.kjb).subscribe(rsb,"action",this.jjb).subscribe(zsb,"action",this.rvb).subscribe(ssb,"action",this.Ima).subscribe(OE,"action",this.wlb).subscribe(QE,"action",this.Vib).subscribe(xsb,"action",this.Esb).subscribe(Asb,"action",this.Ima).subscribe(osb,"action",this.Bsb);this.H.refresh();this.J=new $e;nE("queryeditor",function(){var a=qE("queryeditor");m.J.callback(a.C(h,m.D,m.O,m.oa,d))})}r(O5d,z);
function P5d(a,b){var c=tjc(),d=new hv(oR.concat(["waffle-dataconnector-connection-selected"])),e=new hv(["waffle-dataconnector-active-sheet-db-connection"]),f=oR.concat(["waffle-dataconnector-active-sheet-db-connection","sheet-access-no-protected-range-for-sheet"]);c||f.push("waffle-dataconnector-active-sheet-not-plx");c=new hv(f);psb.Pa(!0);b.C(NE,pR).F(NE,pR).C(OE,pR).F(OE,pR).C(zsb,c).C(ssb,c).C(PE,pR).C(QE,d).C(xsb,c).C(Asb,c).C(usb,e);b.C(tsb,c);a.Aa.xb(tsb,Na,function(){a.H.refresh()});I(H(),
"fedp")&&b.C(rsb,pR).F(rsb,pR)}p=O5d.prototype;p.rf=function(a){this.D.rf(a)};function H4(a,b){A(a.C);a.C=b;a.C.Td(a.R);b instanceof mt?a.O.Jh(a.C):a.O.Jh(new fHb(a.C));a.C.render();a.C.setVisible(!0)}p.ida=function(){A(this.C);this.C=null};p.gkb=function(){this.C&&this.C.isVisible()||(PE.setValue(null),QE.setValue(null))};
p.WKb=function(){var a=new v4d;this.Ba(a);H4(this,a);M3d(this.D).then(function(b){var c=[];Fx(b,1).forEach(function(a){c.push(o4d((new n4d).Ze(a.getId()).Ie(a.getName()).setType(V(a,3))).build())});a.isDisposed()||(x4d(a,c),w4d(a,!1))},function(){Q5d("Error getting managed connections");var b=[];a.isDisposed()||(x4d(a,b),w4d(a,!1))})};
p.n1a=function(){var a=this,b=R5d("Connecting to Plx...");S5d(this,"Plx",2).then(function(c){T5d(a,c);hr(gr.getInstance(),b)},function(){Q5d("Could not connect to Plx");hr(gr.getInstance(),b)})};p.m1a=function(){var a=this,b=R5d("Connecting to BigQuery..."),c;S5d(this,"BigQuery",3).then(function(b){c=b;return j4d(new i4d(a.D,b))}).then(function(d){hr(gr.getInstance(),b);U5d(a,c,d)},function(){hr(gr.getInstance(),b);Q5d("Could not connect to BigQuery")})};p.$Nb=function(){V5d(this,[],!1)};
function U5d(a,b,c){c=new Q3d(c);var d=new f4d(c);a.Ba(d);H4(a,d);d.getResult().then(function(c){W5d(a,b,c)},function(){a.oa.C(35753);A(d)})}function R5d(a){return gr.getInstance().postMessage(ir(a,"info",!0))}function Q5d(a){gr.getInstance().postMessage(ir(a,"error",!0))}function S5d(a,b,c){var d=new eY;d.Ie(b);X(d,2,c);return G3d(a.D,d).then(function(a){return V(a,2)})}
function X5d(a,b){var c=R5d("Importing connection..."),d=new fY;d.Ze(b);d.setType(1);return new Qe(function(b,f){I3d(a.D,d).then(function(){hr(gr.getInstance(),c);b()},function(){hr(gr.getInstance(),c);f()})})}function Y5d(a,b){var c=F3d(a.ma,b).getName();a.J.addCallback(function(d){d=d.A$a(b,c);a.Ba(d);H4(a,d)})}function W5d(a,b,c){a.J.addCallback(function(d){d=d.z$a(b,c);a.Ba(d);H4(a,d)})}function T5d(a,b){a.J.addCallback(function(c){c=c.B$a(b);a.Ba(c);H4(a,c)})}
p.Vib=function(){var a=this,b=QE.getValue(),c=b.getId(),d=b.getType();switch(d){case 2:T5d(this,c);break;case 1:F3d(this.ma,b.getId())?Y5d(this,c):X5d(this,c).then(function(){Y5d(a,c)},function(){Q5d("Error importing connection")});break;default:throw Error("Unsupported connection type: "+d);}};
p.nub=function(a){var b=this.C;b.Sa=!0;G4(b,$c("Executing query"));z5d(b);var c=V(a,2);Y4d(Z4d(X4d(b5d(this.Ga,a),function(a){if(!b.isDisposed()){b.O.stop();b.O.sC();x5d(b,!1);b.Sa=!1;b.fb=c;var d=1E4<V(a,3)||!!V(a,4);b.yc=d;if(!b.isDisposed()){d=b.yc;var f=V(a,3);d=d?V(a,4)?"Query returns more than "+(c4d.format(f)+(" rows of data. Please revise your query to return no more than "+(c4d.format(1E4)+" rows."))):"Query returns "+(c4d.format(f)+(" rows of data. Please revise your query to return no more than "+
(c4d.format(1E4)+" rows."))):(new $u("{TOTAL_ROWS, plural, =0 {Query returns no results.}=1 {Query returns 1 row of data.}other {Query returns # rows of data.}}")).format({TOTAL_ROWS:f});d=cd("strong",void 0,d);d=ed(d,cd("br"),J5d);G4(b,d)}b.J.qOb(V(a,2));s5d(b);b.oa.setContent("Refresh preview");z5d(b)}}),function(){b.isDisposed()||u5d(b)}),function(a){b.isDisposed()||w5d(b,a)}).start()};p.kjb=function(a){Z5d(this,1,a)};p.jjb=function(a){Z5d(this,2,a)};
function Z5d(a,b,c){var d=a.C;X(c,3,b);H3d(a.D,c).then(function(c){$5d(a,c);2==b&&ZAb()},function(a){d.isDisposed()||w5d(d,a)});B5d(d)}function $5d(a,b){z4d(a.L,V(b,2),b.cj());var c=b.jb();a.ida();QJ(a.F,c)?TJ(a.F.C)==c?a.H.refresh():VJ(a.F,c,void 0,{pC:!0}):a.Ma.Rc(a.F,["pb","eb"],function(b){"pb"==b.type&&b.Hh==c&&VJ(a.F,c,void 0,{pC:!0})})}p.rvb=function(){V5d(this,[ZL(this.F.C)],!0)};
function V5d(a,b,c){var d=new m5c;b.forEach(function(a){Dx(d,1,a)});K3d(a.D,d).then(function(b){a6d(a,Fx(b,1));a.H.refresh()},function(b){return b6d(a,b,c)})}function b6d(a,b,c){var d=[],e=[];Fx(b,1).forEach(function(a){return 3==a.cj().getState()?e.push(a):d.push(a)});a6d(a,d);a.H.refresh();c&&(b=e[0],c=b.cj(),c.getErrorCode(),c6d(a,b.jb(),c))}function a6d(a,b){b.forEach(function(b){var c=QJ(a.F,b.jb());if(c=c&&c.H)c=V(c,1),b=b.cj(),a.L.C[c]=b})}
function c6d(a,b,c){var d=QJ(a.F,b),e=d&&d.H;if(e){d=d.ze();e=ritz_api.DbxApi.getTypeOfQuery(V(e,1));var f="waffle-dataconnector-ssologin-"+Yb(),h=N5d(c,e,d,f);a.Ba(h);a.O.Jh(h);h.render();h.setVisible(!0);h.getResult().then(function(){A(h);a.Ima(b)},function(){A(h)});(c=Fd(f))&&D4.prototype.getHandler.call(h).V(c,"click",function(){d6d(a,b,h)})}}function d6d(a,b,c){q5d(a.Da,function(){A(c);V5d(a,[b],!0)})}
p.Ima=function(a){if((a=void 0!==a?QJ(this.F,a):this.F.C.C)&&yI(a)){var b=a.H;a=V(b,2);b=V(b,1);switch(ritz_api.DbxApi.getTypeOfQuery(b)){case 2:e6d(this,a,b);break;case 1:f6d(this,a,b);break;case 3:g6d(this,a,b)}}};
function f6d(a,b,c){var d=F3d(a.ma,b).getName(),e=h6d(a,c),f=i6d(a,c);a.J.addCallback(function(h){var k=R5d("Loading query...");Ue([e,f]).then(function(e){e=h.E$a(b,d,c,e[0],e[1]?e[1]:null);a.Ba(e);hr(gr.getInstance(),k);H4(a,e)},function(){hr(gr.getInstance(),k);Q5d("Could not load query")})})}
function e6d(a,b,c){var d=h6d(a,c),e=i6d(a,c);a.J.addCallback(function(f){var h=R5d("Loading query...");Ue([d,e]).then(function(d){d=f.F$a(b,c,d[0],d[1]?d[1]:null);a.Ba(d);hr(gr.getInstance(),h);H4(a,d)},function(){hr(gr.getInstance(),h);Q5d("Could not load query")})})}
function g6d(a,b,c){var d=j4d(new i4d(a.D,b)),e=h6d(a,c),f=i6d(a,c);a.J.addCallback(function(h){var k=R5d("Connecting to BigQuery...");Ue([e,f,d]).then(function(d){var e=d[0],f=d[1]?d[1]:null;d=d[2];var l=V(e,4).zm();d=new Q3d(d,l);e=h.D$a(b,d,c,e,f);hr(gr.getInstance(),k);H4(a,e)},function(){hr(gr.getInstance(),k);Q5d("Could not load query")})})}function h6d(a,b){var c=Ve(),d=new AY;X(d,1,b);N3d(a.D,d).then(function(a){c.resolve(V(a,2))},function(a){return c.reject(a)});return c.C}
function i6d(a,b){var c=A4d(a.L,b);if(!c||3!=c.getState())return Se(null);c=new CY;X(c,1,b);return a.D.cj(c).then(function(a){return a.cj()})}p.wlb=function(a){var b=this,c=V(a,1),d=this.C;L3d(this.D,a).then(function(a){a=a.cj();b.L.C[c]=a;a=ritz_api.DbxApi.getSheetIdForQuery(c);VJ(b.F,a,void 0,{pC:!0});b.ida();b.H.refresh()},function(a){d.isDisposed()||w5d(d,a)});B5d(d)};
p.Esb=function(){var a=this,b=this.F.C.C,c=V(b.H,1),d=new CY;X(d,1,c);this.D.cj(d).then(function(c){(c=c.cj())&&3==c.getState()&&c6d(a,b.jb(),c)})};p.Bsb=function(){nr("https://cloud.google.com/bigquery/docs/projects")};function j6d(){z.call(this)}r(j6d,jE);j6d.prototype.C=function(){return O5d};pE("dataconnector",j6d);

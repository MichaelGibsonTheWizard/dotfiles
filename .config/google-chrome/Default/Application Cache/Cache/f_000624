fC.prototype.ej=ea(103,function(){return T(this,2)});NM.prototype.ej=ea(102,g("F"));aZ.prototype.ej=ea(101,function(){return T(this,1)});cZ.prototype.ej=ea(100,function(){return T(this,1)});dZ.prototype.ej=ea(99,function(){return T(this,2)});hZ.prototype.ej=ea(98,function(){return T(this,1)});pZ.prototype.ej=ea(97,function(){return T(this,1)});
BZ.prototype.ej=ea(96,function(a){var b=this,c=new Gz;c.xi=!0;var d=c.serialize(a);return new Pe(function(a,f){CZ(b,"/dbx/getExecutionStatus",d,function(b){c.xi=!1;b=c.ld(pZ.Ba(),b.jf());a(b)},function(){f()})})});function K9d(a,b){var c=new Gz;c.xi=!0;var d=c.serialize(b);return new Pe(function(b,f){CZ(a,"/dbx/createQuery",d,function(a){c.xi=!1;a=c.ld(aZ.Ba(),a.jf());3==a.ej().getState()?f(a):b(a)},function(){var a=new aZ,b=new Pz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}
function L9d(a,b){var c=new Gz;c.xi=!0;var d=c.serialize(b);return new Pe(function(b,f){CZ(a,"/dbx/previewQuery",d,function(a){c.xi=!1;a=c.ld(cZ.Ba(),a.jf());3==a.ej().getState()?f(a):b(a)},function(){var a=new cZ,b=new Pz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}
function M9d(a,b){var c=new Gz;c.xi=!0;var d=c.serialize(b);return new Pe(function(e,f){CZ(a,"/dbx/refreshSheets",d,function(a){c.xi=!1;a=c.ld(j$c.Ba(),a.jf());Hv(a,1).some(function(a){return 3==a.ej().getState()})?f(a):e(a)},function(){var a=new j$c,c=new Pz;c.tb(3);U(c,2,1);Hv(b,1).forEach(function(b){var d=new dZ;U(d,1,b);U(d,2,c);Fv(a,1,d)});f(a)})})}
function N9d(a,b){var c=new Gz;c.xi=!0;var d=c.serialize(b);return new Pe(function(b,f){CZ(a,"/dbx/editQuery",d,function(a){c.xi=!1;a=c.ld(hZ.Ba(),a.jf());3==a.ej().getState()?f(a):b(a)},function(){var a=new hZ,b=new Pz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}function O9d(a){var b=new Gz;return new Pe(function(c,d){nw(iu(ow(nx(ju(a.C.rf("/dbx/listConnections"),"GET")),1).setTimeout(3E4),function(a){b.xi=!1;a=b.ld(s$c.Ba(),a.jf());c(a)}),d).Pe()})}
function P9d(a,b){var c=new Gz;c.xi=!0;var d=Ao(c.serialize(b));return new Pe(function(b,f){nw(iu(cx(ow(nx(ju(a.C.rf("/dbx/getQuery"),"POST")),1).setTimeout(3E4),["data",d]),function(a){c.xi=!1;a=c.ld(G$c.Ba(),a.jf());T(a,1)?b(a):f("Query is not found")}),f).Pe()})}
function Q9d(a,b){var c=new Gz;c.xi=!0;var d=c.serialize(b);return new Pe(function(b,f){CZ(a,"/dbx/getBigQueryProjects",d,function(a){c.xi=!1;a=c.ld(nZ.Ba(),a.jf());a.Yt()&&f(a);b(a)},function(){var a=new cZ,b=new Pz;U(a,1,b);b.tb(3);U(b,2,1);f(a)})})}function R9d(a,b){var c=new Gz;c.xi=!0;var d=c.serialize(b);return new Pe(function(b,f){CZ(a,"/dbx/getConnection",d,function(a){c.xi=!1;a=c.ld(N$c.Ba(),a.jf());b(a)},function(){f()})})}function S9d(a){nf(this,a,0,-1,null,null)}w(S9d,mf);function T9d(a,b,c){b=void 0===b?"":b;c=void 0===c?"dataconnector-querytype-raw":c;this.C=[];for(var d=0;d<a.length;d++)this.C.push(a[d].clone());this.F=b;this.D=c};function U9d(){var a='<div class="'+Q("waffle-dataconnector-footer-sharing-message")+'">';return P(a+'<span>The data you query is visible to everyone with view access, but your query is only visible to people with edit access. <a href="https://support.google.com/docs/answer/9077536" target="_blank">Learn more</a></span></div>')};function V9d(a){a=a.mEb;var b='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-section")+'"><h3 class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-header")+'">';b=b+"Billing project"+('</h3><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper")+'"></div>'+(a?'<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-radio-group")+'"><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")+
'"></div><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")+'"></div></div>':"")+"</div>");return P(b)}function W9d(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper")+'"><p>';a=a+'Your use of BigQuery is governed by the Google Cloud Platform <a href="https://cloud.google.com/terms/" target="_blank">Terms of Service</a>.'+("</p></div>"+O(U9d(null,b)));return P(a)};function X9d(){return P('<svg class="waffle-dataconnector-database-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#000" fill-rule="evenodd"><ellipse cx="9" cy="5" rx="7" ry="3"/><path d="M16,7 L16,8.99999983 C16,10.6568542 12.8659932,12 9,12 C5.13400675, 12 2,10.6568542 2,9 L2,7 C2,8.65685425 5.13400675,10 9,10 C12.8659932,10 16,8.65685425 16,7 Z"/><path d="M16,11 L16,12.9999998 C16,14.6568542 12.8659932,16 9,16 C5.13400675,16 2,14.6568542 2,13 L2,11 C2,12.6568542 5.13400675,14 9,14 C12.8659932,14 16,12.6568542 16,11 Z"/></g></svg>')}
function Y9d(a){a=a||{};var b=a.color;a="";b=Ls(b,null)?"#D0021B":b;a+='<svg class="waffle-dataconnector-error-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="'+Q(b)+'" fill-rule="evenodd" d="M9,13 L11,13 L11,15 L9,15 L9,13 Z M9,5 L11,5 L11,11 L9,11 L9,5 Z M9.99,0 C4.47,0 0,4.48 0,10 C0,15.52 4.47,20 9.99,20 C15.52,20 20,15.52 20,10 C20,4.48 15.52,0 9.99,0 Z M10,18 C5.58,18 2,14.42 2,10 C2,5.58 5.58,2 10,2 C14.42,2 18,5.58 18,10 C18,14.42 14.42,18 10,18 Z"></path></g></svg>';
return P(a)}
function Z9d(){return P('<svg class="waffle-dataconnector-bigquery-icon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="#000000" fill-rule="evenodd" d="M17.6210231,14.9676464 C17.7267041,14.964158 17.8336481,14.999598 17.9136667,15.0739664 L21.2187334,18.1431672 C21.3715333,18.2853017 21.3715333,18.5181274 21.2187334,18.6604475 L19.8908,19.8929813 C19.7375334,20.0356729 19.4867333,20.0356729 19.3334666,19.8929813 L16.0288667,16.8252043 C15.9483809,16.7504669 15.9100327,16.6511429 15.9138223,16.5530387 C14.5318646,17.5088871 12.8185327,18.0746254 10.962963,18.0746254 C6.38121025,18.0746254 2.66666667,14.6253786 2.66666667,10.3707987 C2.66666667,6.11585235 6.38121025,2.66666667 10.962963,2.66666667 C15.5447814,2.66666667 19.259325,6.11585235 19.2592593,10.3708597 C19.2592593,12.0936892 18.6501585,13.6844725 17.6210231,14.9676464 Z M10.9627632,16.1481946 C14.3991593,16.1481946 17.1851852,13.5615621 17.1851852,10.3706486 C17.1851852,7.17973497 14.3992258,4.59254616 10.9627632,4.59254616 C7.52630064,4.59254616 4.74074074,7.17967314 4.74074074,10.3706486 C4.74074074,13.561624 7.52630064,16.1481946 10.9627632,16.1481946 Z M6.81481481,10.3703704 L8.88888889,10.3703704 L8.88888889,14.0029401 C8.03391111,13.6464441 7.31942754,13.1505168 6.81481481,12.5594013 L6.81481481,10.3703704 Z M9.92592593,8.44442896 L12,8.44442896 L12,14.1665272 C11.6766072,14.200082 11.3475683,14.2222532 11.0093815,14.2222532 C10.6390341,14.2222532 10.2784063,14.1975885 9.92592593,14.1574203 L9.92592593,8.44442896 Z M13.044326,11.3333411 L15.1184,11.3333411 L15.1184,12.4901418 C14.6287957,13.0790718 13.9116201,13.5742789 13.044326,13.933362 L13.044326,11.3333411 Z"></path></g></svg>')}
function $9d(a){a=a||{};var b=a.opacity;a="";b=Ls(b,null)?1:b;a+='<svg class="waffle-dataconnector-menu-icon" fill="#000000" fill-opacity="'+Q(b)+'" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>';return P(a)};function a$d(){var a=P,b='<div class="'+Q("waffle-dataconnector-modal-header")+'"><div class="'+Q("waffle-dataconnector-modal-title")+'" role="heading"></div><div class="'+Q("waffle-dataconnector-modal-close-button")+'" tabindex="0" role="button">';var c=P('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z M0,0 L18,0 L18,18 L0,18 L0,0 Z"/><polygon fill="#000" points="14.53 4.53 13.47 3.47 9 7.94 4.53 3.47 3.47 4.53 7.94 9 3.47 13.47 4.53 14.53 9 10.06 13.47 14.53 14.53 13.47 10.06 9"/></g></svg>');
return a(b+c+'</div></div><div class="'+Q("waffle-dataconnector-modal-body")+'"></div><div class="'+Q("waffle-dataconnector-modal-footer")+'"></div>')};function A4(a,b){a=void 0===a?"":a;et.call(this,!1,b);this.Ab=a;this.C=new Or(void 0,b$d.getInstance());this.Ga(this.C);this.C.Zf("Close");this.ub=null;this.ib=!0}r(A4,et);p=A4.prototype;
p.Ca=function(){et.prototype.Ca.call(this);var a=this.getId();Ak(this.Oa(),"labelledby",a);zk(this.Oa(),"dialog");J(this.getElement(),"waffle-dataconnector-modal");this.Ab&&J(this.getElement(),this.Ab);ys(this.getElement(),a$d);this.Ja("waffle-dataconnector-modal-title").id=a;a=this.Ro();J(a,"waffle-dataconnector-modal-bg");K(a,this.ib);this.C.Va(this.Ja("waffle-dataconnector-modal-close-button"));this.ub&&c$d(this)};
p.Ia=function(){et.prototype.Ia.call(this);d$d(this);this.getHandler().R(this.C,"action",this.oY);this.getHandler().R(this.Oa(),["keydown","keypress"],this.AIb)};p.sb=function(){return this.hb("waffle-dataconnector-modal-body")};function e$d(a){return a.hb("waffle-dataconnector-modal-footer")}function f$d(a,b){a.ub=b;a.rb()&&c$d(a)}function d$d(a){var b=a.qa(),c=a.Ro(),d=a.sp;a.ib?(d&&b.yr(d,a.getElement()),b.yr(c,a.getElement())):(b.Ef(d),b.Ef(c))}p.oY=function(){Iub.zb()};p.w6=function(){Iub.zb()};
p.AIb=function(a){"keydown"==a.type?27==a.keyCode?this.w6():9==a.keyCode&&a.shiftKey&&a.target==this.getElement()&&YRa(this):this.QFa(a)};function c$d(a){Nl.getInstance().setContent(a.Ja("waffle-dataconnector-modal-title"),a.ub)}p.QFa=ba();function b$d(){}r(b$d,Nr);b$d.prototype.Hp=n("waffle-dataconnector-modal-close-button");wa(b$d);function B4(a,b){A4.call(this,a,b);this.H=Ue()}r(B4,A4);p=B4.prototype;p.getResult=function(){return this.H.C};p.resolve=function(a){this.H.resolve(a)};p.reject=function(a){this.H.reject(a)};p.Ha=function(){A4.prototype.Ha.call(this);this.H.reject()};p.w6=function(){this.reject()};p.oY=function(){this.reject()};var g$d=new Su(1);function h$d(a){var b=1024<=a;a=b?m2c(parseInt(a,10)):a;return(new Uu("{AT_LEAST_ONE_KB, select, \n     true {Will process {BYTES}.}\n     other {\n         {BYTES, plural,\n             =0 {Will process # bytes.}\n             =1 {Will process # byte.}\n             other {Will process # bytes.}}}}")).format({AT_LEAST_ONE_KB:b?"true":"false",BYTES:a})}
function i$d(){var a=new er,b="Configure a project in the Google Cloud Platform console to continue. "+(a.xe("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.ze("a")));return a.format(b)};function j$d(a,b){B4.call(this,"waffle-dataconnector-bigqueryquerysettingsdialog",b);f$d(this,this.qa().Ca("SPAN",void 0,N(Z9d),"BigQuery data connection"));this.J=a.C;this.D=new CU;this.Ga(this.D);this.D.Dd("waffle-dataconnector-bigqueryquerysettingsdialog-project-select");this.D.Zf("Billing project");a=this.D;a.D="Select a project";a.by();this.L=new XX(this.qa(),"Raw data");this.ma=new XX(this.qa(),"Pivot table");this.O=new YX([this.L,this.ma]);this.F=new ZY("Write query");this.Ga(this.F);this.F.Dd("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button")}
r(j$d,B4);
j$d.prototype.Ca=function(){B4.prototype.Ca.call(this);var a=I(H(),"fedp");ys(this.sb(),V9d,{mEb:a});e$d(this).appendChild(N(W9d));this.D.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper"));this.F.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper"));a&&(this.L.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")),this.ma.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")),ZX(this.O,
this.L))};j$d.prototype.Ia=function(){B4.prototype.Ia.call(this);if(0==this.J.length){this.D.Na(!1);var a=this.D;a.D="No billing projects";a.by();a=this.qa();var b=re(a,i$d());a.appendChild(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-project-section"),a.Ca("DIV","waffle-dataconnector-bigqueryquerysettingsdialog-error-caption",b))}else{a=this.J;for(b=0;b<a.length;b++){var c=a[b];this.D.bd(new wn(k$d(c),c.getId()))}this.getHandler().R(this.F,"action",this.Da).R(this.D,"change",this.xa)}this.xa()};
j$d.prototype.xa=function(){this.F.Na(null!=this.D.cf())};j$d.prototype.Da=function(){this.resolve(l$d(this))};function l$d(a){var b=a.D.cf().getValue(),c="dataconnector-querytype-raw";I(H(),"fedp")&&"Pivot table"==$X(a.O).getLabel()&&(c="dataconnector-querytype-pivot");return new T9d(a.J,b,c)}function k$d(a){var b=a.getName();a=a.getId();return b+" ["+a+"]"};function m$d(a){this.C=a}function n$d(a){var b=new A$c;return Q9d(a.C,b).then(function(a){return Hv(a,4)})};function C4(a,b){ft.call(this,"waffle-dataconnector-prompt",a,b);this.L=Ue();rt(this,null);qt(this,!0);this.C=new wV("Continue");this.Ga(this.C);this.J=new yV("Cancel");this.Ga(this.J);this.O=[]}r(C4,ft);p=C4.prototype;p.Dd=function(a){this.O.push(a);var b=this.getElement();b&&J(b,a)};p.getResult=function(){return this.L.C};p.resolve=function(a){this.L.resolve(a)};p.reject=function(){this.L.reject()};p.Ca=function(){ft.prototype.Ca.call(this);var a=kt(this);this.J.render(a);this.C.render(a);K(a,!0)};
p.Ia=function(){var a=this;ft.prototype.Ia.call(this);Gk(this.Oa(),this.O);this.getHandler().R(this.J,"action",function(){return a.reject()})};p.setVisible=function(a){ft.prototype.setVisible.call(this,a);a||this.reject()};p.Ha=function(){ft.prototype.Ha.call(this);this.reject()};function o$d(a,b){C4.call(this,a,b)}r(o$d,C4);o$d.prototype.Ia=function(){var a=this;C4.prototype.Ia.call(this);this.getHandler().R(this.C,"action",function(){return a.resolve(0)})};function p$d(a){return P('<div class="'+Q("waffle-dataconnector-connectioncard")+'" role="button" tab-index="0"><div class="'+Q("waffle-dataconnector-connectioncard-icon")+'"></div><div class="'+Q("waffle-dataconnector-connectioncard-body")+'"><div class="'+Q("waffle-dataconnector-connectioncard-header")+'">'+O(a.uea)+'</div><div class="'+Q("waffle-dataconnector-connectioncard-type")+'">'+O(a.V1a)+"</div></div></div>")};function q$d(){}r(q$d,Nr);q$d.prototype.Ca=function(a){a=a.Ra();return N(p$d,{uea:a.getName(),V1a:"SQL"})};q$d.prototype.Cb=n("waffle-dataconnector-connectioncard");wa(q$d);function r$d(a,b){Or.call(this,void 0,q$d.getInstance(),b);this.gc(a);this.hf(8,!0)}r(r$d,Or);r$d.prototype.gc=function(a){Or.prototype.gc.call(this,a)};function s$d(){var a='<div class="'+Q("waffle-dataconnector-connectionmanager-content")+'"><div class="'+Q("waffle-dataconnector-connectionmanager-header")+'">';a=a+"Choose a data source"+('</div><div class="'+Q("waffle-dataconnector-connectionmanager-connections")+'"></div></div>');return P(a)};function t$d(a){B4.call(this,"waffle-dataconnector-connectionmanager",a);f$d(this,this.qa().Ca("SPAN",void 0,N(X9d),"Managed data sources"));this.D=new M(this.qa());this.Ga(this.D);this.F=new bY;this.Ga(this.F);this.L=BZ.getInstance()}r(t$d,B4);t$d.prototype.Ca=function(){B4.prototype.Ca.call(this);ys(this.sb(),s$d);e$d(this).appendChild(N(U9d));this.F.render(this.Ja("waffle-dataconnector-connectionmanager-content"))};
t$d.prototype.Ia=function(){var a=this;B4.prototype.Ia.call(this);this.D.Va(this.Ja("waffle-dataconnector-connectionmanager-connections"));this.getHandler().R(this.D,"action",this.J);u$d(this,!0);O9d(this.L).then(function(b){b=Hv(b,1);v$d(a,b);u$d(a,!1)},function(){u$d(a,!1);$q.getInstance().postMessage(br("Could not get managed data sources","error",!0))})};function u$d(a,b){Jk(a.Oa(),"waffle-dataconnector-connectionmanager-loading",b);a.F.setActive(b)}
function v$d(a,b){var c=a.Ja("waffle-dataconnector-connectionmanager-connections");if(0==b.length){var d=new er,e="You do not have access to any managed data sources. "+(d.xe("a",{"class":"goog-inline-block",href:"https://sites.google.com/corp/google.com/dataconnectors/home",target:"_blank"})+("Learn more"+d.ze("a")));b=a.qa();d=re(b,d.format(e));b.appendChild(c,b.Ca("DIV","waffle-dataconnector-connectionmanager-no-connections-message",d));K(a.Ja("waffle-dataconnector-connectionmanager-header"),!1)}else{b=
ja(b);for(d=b.next();!d.done;d=b.next())d=new r$d(d.value),a.D.Ga(d),d.render(c);b=new wV("CREATE NEW DATA SOURCE");a.Ga(b);b.render(c);a.getHandler().R(b,"action",function(){gr("https://sites.google.com/corp/google.com/dataconnectors/home")})}}t$d.prototype.J=function(a){a.stopPropagation();this.resolve(a.target.Ra())};function w$d(){y.call(this);this.C={};this.D=new Gz}r(w$d,y);function x$d(a,b,c){a.C[b]=c}function y$d(a,b){var c=ritz_api.DbxApi.getExecutionStatusForQuery(b);c=null==c?null:a.D.ld(Pz.Ba(),c);var d=a.C[b];return d?c&&d.getToken()==c.getToken()?(rc(a.C,b),c):d:c};function z$d(a){y.call(this);this.F=a;this.D=new E;this.va(this.D);this.C=[]}r(z$d,y);function A$d(a){return 0<a.C.length?Ta(a.C):null}function D4(a,b,c){void 0===c||c?B$d(a):(c=A$d(a))&&c.setVisible(!1);b.Kd(a.D);b instanceof ft?a.F.Lh(b):(c=new WKb(b),c.Kd(a.D),a.F.Lh(c));b.render();b.setVisible(!0);a.C.push(b)}function C$d(a){var b=a.C.pop();for(A(b);0<a.C.length;)if(b=Ta(a.C),b.isDisposed())a.C.pop();else{b.setVisible(!0);break}}
function B$d(a){for(var b=ja(a.C),c=b.next();!c.done;c=b.next())A(c.value);a.C=[]}z$d.prototype.Ha=function(){B$d(this);y.prototype.Ha.call(this)};function D$d(a,b,c){b=c||b;b="<div id="+Ss(a.id)+' class="'+Q("waffle-dataconnector-dbschematreenode")+'"><div class="'+Q("waffle-dataconnector-dbschematreenode-label")+(a.Eb?" waffle-dataconnector-dbschematreenode-rtl":"")+'"><div class="'+Q("waffle-dataconnector-dbschematreenode-spinner-container")+'">'+O(k4c({yb:!0},b))+"</div>";c=P('<svg class="waffle-dataconnector-expand-icon" width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><polygon id="Shape" points="0 0 18 0 18 18 0 18"></polygon><polygon id="Shape" fill-opacity="0.87" fill="#000000" points="5 7 9 11 13 7"></polygon></g></g></svg>');
a=b+O(c)+'<div class="'+Q("waffle-dataconnector-dbschematreenode-title")+'">'+O(a.title)+'</div></div><div class="'+Q("waffle-dataconnector-dbschematreenode-child-container")+'" role="group"></div></div>';return P(a)};function E$d(a){this.C=a}E$d.prototype.getType=g("C");function F$d(a){this.C="jdbc-table";this.D=a}r(F$d,E$d);function E4(a,b,c,d){c=void 0===c?!1:c;M.call(this,d);this.gc(b);this.J=a;this.nextSibling=this.previousSibling=this.parentNode=null;this.H=(this.D=c)?2:0;this.F=this.C=!1}r(E4,M);p=E4.prototype;p.Ca=function(){this.mb(N(D$d,{title:this.J,id:this.getId()}))};p.sb=function(){return this.hb("waffle-dataconnector-dbschematreenode-child-container")};
p.Ia=function(){M.prototype.Ia.call(this);var a=this.Ja("waffle-dataconnector-dbschematreenode-label"),b=this.Ja("waffle-dataconnector-dbschematreenode-title");a.id=this.getId()+"-label";Ak(this.Oa(),"labelledby",a.id);this.D||Ak(this.Oa(),"expanded",this.C);Ak(this.Oa(),"selected",this.F);zk(this.Oa(),"treeitem");zk(this.Ja("waffle-dataconnector-dbschematreenode-spinner-container"),"presentation");zk(this.Ja("waffle-dataconnector-expand-icon"),"presentation");Jk(this.Oa(),"waffle-dataconnector-dbschematreenode-rtl",
this.ke());Gva(this.qa());nm(b,this.J,void 0);G$d(this,!1);Jk(this.Oa(),"waffle-dataconnector-dbschematreenode-leaf",this.D);this.getHandler().R(a,"click",this.BIb)};p.getTitle=g("J");p.BIb=function(){this.Cd(!this.C);this.Vb(!0)};p.Cd=function(a){if(!this.D&&a!=this.C){var b=eva(64,a);this.dispatchEvent(b)&&G$d(this,a)}};function G$d(a,b){a.D||(a.C=b,a.rb()&&(Jk(a.Oa(),"waffle-dataconnector-dbschematreenode-open",a.C),Ak(a.Oa(),"expanded",a.C)))}
p.Vb=function(a){if(a!=this.F){var b=eva(8,a);this.dispatchEvent(b)&&(this.F=a,this.rb()&&(Jk(this.Oa(),"waffle-dataconnector-dbschematreenode-selected",this.F),Ak(this.Oa(),"selected",a)))}};p.We=g("C");p.Ko=g("H");p.gc=function(a){M.prototype.gc.call(this,a)};p.Ra=function(){return M.prototype.Ra.call(this)};p.Wc=function(a){return M.prototype.Wc.call(this,a)};p.Mc=function(a){return M.prototype.Mc.call(this,a)};
p.Ga=function(a,b){if(this.D)throw Error("Can't add child to leaf node");M.prototype.Ga.call(this,a,b)};function H$d(a){a.parentNode=null;var b=a.previousSibling,c=a.nextSibling;a.previousSibling=null;a.nextSibling=null;b&&(b.nextSibling=c);c&&(c.previousSibling=b)}p.Rf=function(a,b,c){if(this.D)throw Error("Can't add child to leaf node");var d=this.Mc(b-1),e=this.Mc(b);a.parentNode=this;a.nextSibling=e;if(a.previousSibling=d)d.nextSibling=a;e&&(e.previousSibling=a);M.prototype.Rf.call(this,a,b,c)};
p.removeChild=function(a,b){H$d(a);return M.prototype.removeChild.call(this,a,b)};p.vd=function(){return M.prototype.vd.call(this,!0)};p.En=function(a){return M.prototype.En.call(this,a,!0)};function I$d(a){var b=a.C.vd(!0);yb(b);J$d(a,!1)}function J$d(a,b){a.rb()&&K(a.Ja("waffle-dataconnector-schema-menu-error-message"),b)};function K$d(a){I$d(a);a.F.setActive(!0);a.H.H().then(function(b){a.F.setActive(!1);b.forEach(function(b){b=b.getName();b=new E4(b,new F$d(b));J$d(a,!1);a.C.Ga(b,!0)});0==b.length&&J$d(a,!0)},function(){a.F.setActive(!1);J$d(a,!0)})};function L$d(a,b){bt(a.Kc,M$d(a));a.C="vertical"==a.D?IRa(a.Kc,b):JRa(a.Kc,b);var c=ja("vertical"==a.D?[a.C,0]:[0,a.C]);b=c.next().value;c=c.next().value;GH(a.Oa(),b,c,a.ke());a.dispatchEvent("$f")}function M$d(a){var b=a.Oa().parentElement.getBoundingClientRect(),c=b.height;b=b.width;"horizontal"==a.D?(b=0,c-=a.Xc()):(c=0,b-=a.Xc());return new Xk(0,0,b,c)};function N$d(a,b){var c=b.getErrorCode(),d=T(b,3);switch(c){case 20:return O$d(a,d);case 14:return F4('Update parameter "'+(T(b,6).toUpperCase()+'" to reference a cell in the current workbook and try again'));case 15:return F4('Update the cell referenced by parameter "'+(T(b,6).toUpperCase()+'" to be text or a number'));case 16:return F4("Select a parameter name you haven't used before");case 13:return F4('Define your parameter "'+(T(b,6).toUpperCase()+'" and try again'));case 6:return I(H(),"docs-idu")?
(a=new er,b=a.xe("span",{"class":"waffle-dataconnector-error-message"})+("Query timed out. "+(a.xe("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+(a.ze("a")+a.ze("span"))))),a=a.format(b)):a=P$d("Query timed out",d),a;case 8:return I(H(),"docs-idu")?(a=new er,b="Results exceed "+(Q$d+(" rows. Update query and run again. "+(a.xe("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.ze("a"))))),a=a.format(b),a=F4(a)):
a=P$d(R$d,d),a;case 18:return F4("The query returns an ARRAY or a STRUCT type, which is currently not supported.");case 9:return a=new er,b="Go to Plx to specify an engine other than 'Auto' and try again. "+(a.xe("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.ze("a"))),a=a.format(b),F4(a);case 19:return F4("The query is already in execution.");case 17:return a="Can not insert the results of the query: that would increase the number of cells in the workbook above the limit of "+
(dh(H(),"fmtc")+" cells."),F4(a);case 22:return F4("Duplicated column names or aliases are not supported. Please update your query.");case 23:return F4("There is no sheet associated with this query.");case 24:return F4("Can not insert the results of the query: exceeds the maximum characters allowed in a single cell.")}return S$d(d)}
function T$d(a){var b=new er;a=(new Uu("To execute this query, {startLink}sign in to your Google account{endLink}")).format({startLink:b.xe("a",{href:"#",id:a}),endLink:b.ze("a")});return b.format(a)}function O$d(a,b){if(!b)return S$d(b);switch(a){case 2:return F4("Plx error: "+b);case 3:return F4("BigQuery error: "+b);default:return F4("Database error: "+b)}}function S$d(a){return P$d("Something's wrong. Please try again later",a)}var Q$d=(new Su(1)).format(1E4),R$d="Results exceed "+(Q$d+" rows. Update query and run again.");
function F4(a){return bd("span",{"class":"waffle-dataconnector-error-message"},a)}function P$d(a,b){var c=new er;b&&(a=a+": "+b);return F4(c.format(a))};function U$d(a){switch(a){case 2:var b=1;break;case 3:b=2;break;default:b=0}a=new S9d;G(a,1,b);b=new Wj;yf(b,91,a);return b};function V$d(){}r(V$d,Nr);V$d.prototype.Cb=n("waffle-dataconnector-queryeditor-removable-chip-remove-button");wa(V$d);function W$d(){}r(W$d,Nr);W$d.prototype.Ca=function(a){var b=Nr.prototype.Ca.call(this,a);a.qa().appendChild(b,a.qa().Ca("DIV","waffle-dataconnector-queryeditor-removable-chip-chip-content"));return b};W$d.prototype.sb=function(a){return Id("waffle-dataconnector-queryeditor-removable-chip-chip-content",a)};W$d.prototype.Cb=n("waffle-dataconnector-queryeditor-removable-chip-button");
wa(W$d);var X$d=new Gz;function Y$d(a){return a.C.ud().map(function(a){return a.Ra()})};function Z$d(){y.call(this);this.C=Md()}r(Z$d,y);function $$d(a,b){a.C.dataConnectorOnCompleteAuth=b;b=(new io(a.C.location.href)).resolve(new io("dbx/ssoLogin")).toString();var c=Kd();(a=gr(b,{target:"google_popup",width:500,height:500,top:Math.floor((c.height-500)/2),left:Math.floor((c.width-500)/2),toolbar:!1,menubar:!1,location:!1,statusbar:!1},a.C))&&a.focus()}Z$d.prototype.Ha=function(){delete this.C.dataConnectorOnCompleteAuth;y.prototype.Ha.call(this)};function aae(a){var b=a.Wha(),c;if(c=b){a=ja(Y$d(a.Xa));for(c=a.next();!c.done;c=a.next())Fv(b,3,c.value);c=b}return c}function bae(a){a.J.setVisible(!0);var b=Math.min(a.J.nbb().height+16,240);cae(a,b)}function dae(a){if(!a.O.enabled){var b=0;eae(a,b);a.O.R("tick",function(){a.isDisposed()||(b+=.1,eae(a,b))});a.O.start()}}function eae(a,b){G4(a,Zc("Executing query "+(b.toFixed(1)+"s")))}function fae(a,b){a.Ta=!1;a.O.stop();a.O.dD();gae(a,!0);hae(a,b.ej());iae(a)}
function hae(a,b){10==b.getErrorCode()?jae(a):G4(a,N$d(a.HC(),b))}function kae(a){a.Ta=!0;G4(a,Zc("Updating workbook"));iae(a)}function cae(a,b){var c=void 0===c?!0:c;A(a.xa);a.xa=null;c?(c=lae(a),a.xa=new mae(c,b,200,a),a.va(a.xa),a.xa.play()):nae(a,b)}function lae(a){return a.rb()?rl(a.Ja("waffle-dataconnector-newqueryeditor-preview-pane")).height:0}function nae(a,b){var c=a.Ja("waffle-dataconnector-newqueryeditor-main");b=rl(c).height-a.F.Xc()-b;L$d(a.F,b)}
function iae(a){var b=aae(a),c=a.$a.C;a.Ta||null==b||c?(a.Ma.Na(!1),a.ma.Na(!1)):(a.ma.Na(!0),a.Ma.Na(!0));b=a.eb&&a.eb.equals(b);a.J.qpa(!b)}function oae(a){var b=new bZ;a=aae(a);U(b,1,a);U(b,2,30);return b}function jae(a){var b="waffle-dataconnector-ssologin-"+$b(),c=T$d(b);G4(a,c);(b=Fd(b))&&a.getHandler().R(b,"click",function(){return pae(a)})}function pae(a){$$d(a.Oc,function(){gae(a,!1);SE.zb(oae(a),a.Dw)})}
function G4(a,b,c){c=void 0===c?!0:c;a=a.Ja("waffle-dataconnector-newqueryeditor-footer-message");gd(a,b);c&&UI(he(a))}function gae(a,b){a.rb()&&Jk(a.Ja("waffle-dataconnector-newqueryeditor-footer-message-container"),"waffle-dataconnector-newqueryeditor-unhandled-error",b)}function mae(a,b,c,d){Du.call(this,[a],[b],c);this.D=d}r(mae,Du);mae.prototype.Y8=function(){nae(this.D,this.coords[0])};mae.prototype.pS=function(){nae(this.D,this.$O[0])};
var qae=new er,rae="Inserted data is visible to all. The query is visible only to people with edit access. "+(qae.xe("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+qae.ze("a"))),sae=qae.format(rae);function tae(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-button")+'">';var b=P('<svg class="waffle-dataconnector-info-icon-filled" fill="#000000" fill-opacity="0.54" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>');
a=a+O(b)+'</span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-message")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-spinner")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")+'">';a+="Error";b=P('<svg class="waffle-dataconnector-refresh-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><polygon points="0 0 18 0 18 18 0 18"/><path fill="#000" d="M9,13.5 C6.51,13.5 4.5,11.49 4.5,9 C4.5,6.51 6.51,4.5 9,4.5 C10.24,4.5 11.36,5.02 12.17,5.83 L10,8 L15,8 L15,3 L13.24,4.76 C12.15,3.68 10.66,3 9,3 C5.69,3 3.01,5.69 3.01,9 C3.01,12.31 5.69,15 9,15 C11.97,15 14.43,12.84 14.9,10 L13.38,10 C12.92,12 11.14,13.5 9,13.5 L9,13.5 Z"/></g></svg>');
a+="</span></span>"+O(b);return P(a+"Refresh query</div>")}
function uae(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-editquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'">';var b=P('<svg class="waffle-dataconnector-edit-icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');a+=O(b);return P(a+
"Edit query</div>")}function vae(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-viewerror")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(Y9d({color:"#000000"},b));return P(a+"View error</div>")}function wae(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-bigquery-helpdoc")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(Z9d(null,b));return P(a+"Learn more about BigQuery</div>")};function xae(a,b,c,d){wn.call(this,N(tae),a,d);this.V=b;this.J=c;this.H=Hm(new Gm,72).build();this.C=new Or(void 0,Ol(Nr,"waffle-dataconnector-pill-menuitem-refreshquery-info-button"),this.qa());this.Ga(this.C);this.D=new Or(void 0,Ol(Nr,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"),this.qa());this.Ga(this.D);this.F=!1;this.cw(73)}r(xae,wn);p=xae.prototype;
p.Ia=function(){wn.prototype.Ia.call(this);J(this.Oa(),"waffle-dataconnector-pill-menuitem-refreshquery");this.C.Va(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-button"));this.C.Zf("To show the query info, press I.");this.C.Jd("Show the query info");this.D.Va(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"));this.reset();this.getHandler().R(this.C,"action",this.cHa).R(this.D,"action",this.zIb)};
p.$e=function(a){return a.keyCode==this.eS?(this.F&&this.cHa(null),!0):wn.prototype.$e.call(this,a)};p.Pg=function(a){if(a&&Od(a.target)){var b=this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info");if(de(b,a.target))return!0}return wn.prototype.Pg.call(this,a)};p.refresh=function(a){this.F=a;this.reset()};
p.reset=function(){K(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info"),this.F);if(this.F){yae(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-button");var a=this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-message");gd(a,ed)}};p.zIb=function(a){a.stopPropagation();Uub.zb(void 0,this.H)};
p.cHa=function(a){var b=this;a&&a.stopPropagation();yae(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-spinner");this.J.C(35737,this.H);zae(this).then(function(a){a=T(a,2);return Aae(a).then(function(a){a=T(T(a,5),1);a=h$d(a);var c=b.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-message");gd(c,Zc(a));yae(b,"waffle-dataconnector-pill-menuitem-refreshquery-info-message");UI(a)},function(){return Bae(b)})},function(){return Bae(b)})};
function Bae(a){yae(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")}function zae(a){var b=new E$c;U(b,1,a.V);return P9d(BZ.getInstance(),b)}function Aae(a){T(a,6);var b=new bZ;a=a.clone();U(b,1,a);U(b,2,1);U(b,4,!0);return L9d(BZ.getInstance(),b)}
function yae(a,b){["waffle-dataconnector-pill-menuitem-refreshquery-info-button","waffle-dataconnector-pill-menuitem-refreshquery-info-message","waffle-dataconnector-pill-menuitem-refreshquery-info-spinner","waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"].forEach(function(b){return K(a.Ja(b),!1)});K(a.Ja(b),!0);a.C.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-button"==b);a.D.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"==b)}
;function Cae(a,b,c,d){c=void 0===c?!1:c;rZ.call(this,Es($9d,{opacity:.54}),new Bn(d),Dae.getInstance(),d);this.F=a;this.O=c;this.L=b;this.J=Im(Hm(new Gm,72),U$d(ritz_api.DbxApi.getTypeOfQuery(this.F))).build();this.D={};this.D["refresh-query"]=new xae("refresh-query",this.F,this.L,this.qa());this.bd(this.D["refresh-query"]);this.D["edit-query"]=new wn(N(uae),"edit-query",this.qa());this.bd(this.D["edit-query"]);this.D["view-error"]=new wn(N(vae),"view-error",this.qa());this.bd(this.D["view-error"]);
this.D["menu-separator"]=new An(this.qa());this.bd(this.D["menu-separator"]);this.D["bigquery-helpdoc"]=new wn(N(wae),"bigquery-helpdoc",this.qa());this.bd(this.D["bigquery-helpdoc"]);this.getHandler().R(this.Db(),"action",this.ea)}r(Cae,rZ);Cae.prototype.Ia=function(){rZ.prototype.Ia.call(this);J(this.Db().getElement(),"waffle-dataconnector-pill-menu");cEc(this,new Mm(this.Oa(),this.O?4:0));this.px=!0};Cae.prototype.ea=function(a){a=a.target.Ra();(a=Eae[a])&&a.zb(void 0,this.J)};
Cae.prototype.refresh=function(a){var b=[];switch(a){case 2:b.push("edit-query");b.push("refresh-query");break;case 3:b.push("view-error")}if(a=3==ritz_api.DbxApi.getTypeOfQuery(this.F))b.push("menu-separator"),b.push("bigquery-helpdoc");this.D["refresh-query"].refresh(a);a=ja(Object.values(this.D));for(var c=a.next();!c.done;c=a.next())c.value.setVisible(!1);b=ja(b);for(a=b.next();!a.done;a=b.next())this.D[a.value].setVisible(!0)};
Cae.prototype.Cd=function(a,b){if(a){var c=this.Db();if(c&&c.rb()){c=ja(Object.values(this.D));for(var d=c.next();!d.done;d=c.next())d=d.value,d.reset&&d.reset()}}rZ.prototype.Cd.call(this,a,b)};var Fae={},Eae=(Fae["bigquery-helpdoc"]=Hub,Fae["edit-query"]=Lub,Fae["refresh-query"]=Sub,Fae["view-error"]=Uub,Fae);function Dae(){}r(Dae,cad);Dae.prototype.kq=function(a){return a.Ca("DIV",{style:"display:none;"})};wa(Dae);function Gae(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill")+'" tabindex="0"><div class="'+Q("waffle-dataconnector-pill-info")+'"><div class="'+Q("waffle-dataconnector-pill-timestamp")+'"></div><div class="'+Q("waffle-dataconnector-pill-progress")+'"><div class="'+Q("waffle-dataconnector-pill-spinner")+'"></div><span class="'+Q("waffle-dataconnector-pill-progress-message")+'">';a=a+"Running query..."+(' </span></div><div class="'+Q("waffle-dataconnector-pill-error")+'">'+O(Y9d(null,
b)));a=a+"Execution error"+('</div></div><div class="'+Q("waffle-dataconnector-pill-editquery-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-refresh-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-menu-button-wrapper")+'"></div></div>');return P(a)};function Hae(a,b,c,d,e,f,h){f=void 0===f?!1:f;M.call(this,h);this.O=a;this.Da=b;this.xa=c;this.H=f;this.V=d;this.ma=e;b=ritz_api.DbxApi.getTypeOfQuery(a);this.L=Im(Hm(new Gm,72),U$d(b)).build();this.ea=new Iae;this.J=new pm;this.va(this.J);this.F=new yV;this.Ga(this.F);this.F.Dd("waffle-dataconnector-pill-editquery-button");vm(this.J,this.F,Lub,xm,void 0,this.L);this.D=new yV("Refresh");this.D.Dd("waffle-dataconnector-pill-refresh-button");this.Ga(this.D);this.C=new Cae(a,this.ma,this.H,this.qa());
this.C.Dd("waffle-dataconnector-pill-menu-button");this.Ga(this.C)}r(Hae,M);p=Hae.prototype;p.Ca=function(){this.mb(N(Gae))};
p.Ia=function(){var a=this;M.prototype.Ia.call(this);zk(this.Oa(),"toolbar");var b=this.getId()+":label";this.Ja("waffle-dataconnector-pill-info").id=b;Ak(this.Oa(),"labelledby",b);this.F.render(this.Ja("waffle-dataconnector-pill-editquery-button-wrapper"));this.D.render(this.Ja("waffle-dataconnector-pill-refresh-button-wrapper"));this.C.render(this.Ja("waffle-dataconnector-pill-menu-button-wrapper"));nm(this.C.Oa(),"More options",void 0);this.getHandler().R(this.D,"action",this.uwb).R(pe(this.qa()),
"focus",this.refresh).R(this.Oa(),"keydown",function(a){var b=a.keyCode;37!=b&&39!=b||a.preventDefault()});B.np&&B.product.jp&&this.getHandler().R(this.Oa(),"focus",function(){al(a.Oa(),{outline:"1px dotted black"})}).R(this.Oa(),"blur",function(){al(a.Oa(),{outline:"0"})});this.refresh();b=new QQ(this.Oa(),this.qa());this.va(b);RQ(b)};p.Ha=function(){M.prototype.Ha.call(this)};p.ad=function(){this.xa.ad(this.Oa(),this.H?5:1,new Wk(0,this.H?50:0,12,this.H?0:50))};
p.refresh=function(){var a=y$d(this.V,this.O);a=a?a.getState():2;var b=Mub.isEnabled();switch(a){case 5:case 1:K(this.Ja("waffle-dataconnector-pill-timestamp"),!1);K(this.Ja("waffle-dataconnector-pill-progress"),!0);K(this.Ja("waffle-dataconnector-pill-error"),!1);this.F.setVisible(!1);this.D.setVisible(!1);this.D.Na(!1);this.C.setVisible(!1);break;case 4:case 2:K(this.Ja("waffle-dataconnector-pill-timestamp"),!0);K(this.Ja("waffle-dataconnector-pill-progress"),!1);K(this.Ja("waffle-dataconnector-pill-error"),
!1);Jae(this);this.F.setVisible(!1);this.D.setVisible(b);this.D.Na(b);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);break;case 3:K(this.Ja("waffle-dataconnector-pill-timestamp"),!1);K(this.Ja("waffle-dataconnector-pill-progress"),!1);K(this.Ja("waffle-dataconnector-pill-error"),!0);this.F.setVisible(b);this.D.setVisible(!1);this.D.Na(!1);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);b||(K(this.Ja("waffle-dataconnector-pill-timestamp"),!0),K(this.Ja("waffle-dataconnector-pill-error"),
!1),Jae(this));break;default:RLc("Unrecognized execution state: "+a)}this.ad()};function Jae(a){var b=ritz_api.DbxApi.getLastExecutionTimeForSheet(a.Da);0>=b||(b="Updated "+a.ea.format(b),a=a.Ja("waffle-dataconnector-pill-timestamp"),fe(a,b))}p.uwb=function(){this.D.Na(!1);Sub.zb(void 0,this.L)};p.focus=function(){this.Oa().focus()};function Iae(){this.C=new Mu(1);this.D=new Mu(Pu.MONTH_DAY_MEDIUM);this.F=new Mu(7)}
Iae.prototype.format=function(a){a=new Date(a);var b=new Date,c;0<b.getFullYear()-a.getFullYear()?c=this.C.format(a):a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()?c="today":c=this.D.format(a);a=this.F.format(a);return c+(", "+a)};function Kae(a,b,c,d,e,f,h){y.call(this);this.D=a;this.H=b;this.L=c;this.ea=d;this.J=e;this.La=new Mk(this);this.va(this.La);this.F=new xe(this);this.va(this.F);this.O=f;this.V=h;this.C=null;this.La.R(this.L,"F",this.xIb).R(this.D,"kb",this.yIb).R(this.D,"lb",this.Eyb).R(this.ea,"db-execution-status-updated",this.wIb).R(this.D,"Db",this.refresh);this.F.subscribe(Nub,"action",this.$nb)}r(Kae,y);p=Kae.prototype;p.Ha=function(){y.prototype.Ha.call(this);A(this.C)};p.refresh=function(){Lae(this)};
p.xIb=function(){this.C&&this.C.ad()};p.yIb=function(){Lae(this)};p.Eyb=function(){A(this.C);this.C=null};p.$nb=function(){this.C&&(this.C.focus(),this.O.tb(2))};function Lae(a){var b=a.D.C.C;if(b&&sJ(b))if(a.C)a.C.refresh();else{var c=hJ(a.H);if(c){b=c.ke();c=new Mm(c.Ka.J,b?5:1);var d=a.D.C.C,e=T(d.H,1);d=d.jb();a.C=new Hae(e,d,c,a.J,a.V,b);a.C.render()}}}p.wIb=function(a){a.F&&0!=a.F.length&&this.C&&cb(a.F,this.C.O)&&this.C.refresh()};function Mae(a,b,c,d){y.call(this);this.O=a;this.V=b;this.ea=c;this.H=this.J=null;this.F=d||null;this.C=3;this.L=new Nae;this.vm=this.D=null}r(Mae,y);p=Mae.prototype;p.getId=function(){return Da(this)};p.Ha=function(){this.stop();y.prototype.Ha.call(this)};p.start=function(){this.C=2;this.vm=this.D=null;this.iAa(this.O)};p.stop=function(){2==this.C&&(this.C=3,this.L.stop())};function Oae(a,b){a.J=b;return a}function Pae(a,b){a.H=b;return a}
p.iAa=function(a){var b=this;this.V.call(this.F,a).then(function(a){if(2==b.C){b.D=a;b.vm=null;var c=b.ea.call(b.F,a);if(c){a:{a=b.L;c=u(b.iAa,b,c);if(10>a.F){a.F++;var e=1E3}else if(60>a.D)a.D++,e=5E3;else{a=!1;break a}e+=Math.round(.2*e*(Math.random()-.5)*2);a.C=Sl(c,e);a=!0}a||Qae(b,Error("Polling timed out"))}else b.stop(),b.C=4,b.D=a,b.vm=null,b.J&&b.J.call(b.F,a)}},function(a){2==b.C&&Qae(b,a)})};function Qae(a,b){a.stop();a.C=1;a.D=null;a.vm=b;a.H&&a.H.call(a.F,b)}p.getStatus=g("C");p.HF=g("vm");
function Nae(){this.D=this.F=0;this.C=null}Nae.prototype.stop=function(){this.D=this.F=0;Tl(this.C);this.C=null};function Rae(a){this.C=a}function Sae(a,b){var c=T(b,1);return new Mae(b,function(b){return L9d(a.C,b)},function(a){if(1==a.ej().getState()){var b=new bZ;U(b,1,c);b.setToken(a.ej().getToken());return b}return null})};var Tae=Object.freeze({caption:"Dremel",value:"DREMEL"}),Uae=Object.freeze({caption:"F1",value:"F1"}),Vae=Object.freeze({caption:"Procella",value:"PROCELLA"});function Wae(a,b,c,d){var e="Error in query on "+c;c=new o$d;c.Dd("waffle-dataconnector-error-popup");gt(c,e);c.C.setContent("Open query editor");c.J.setContent("Ok");a=10==a.getErrorCode()?T$d(d):N$d(b,a);ht(c,a);return c};function Xae(a,b,c,d,e,f,h,k,l){y.call(this);var m=this;this.L=new w$d;this.va(this.L);this.D=BZ.getInstance();this.xa=new Rae(this.D);this.F=b;this.ea=f;this.O=l;this.C=new z$d(f);this.H=new Kae(b,c,d,a,this.L,e,this.O);this.va(this.H);this.La=new Mk(this);this.va(this.La);this.V=new xe(this);this.va(this.V);this.ma=new Z$d;this.va(this.ma);Yae(this,k);this.La.R(this.C.D,["show","hide"],this.mlb);this.La.R(this.C.D,["Yf"],this.nqb);Zae(this);this.H.refresh();this.J=new Ye;oE("queryeditor",function(){var b=
rE("queryeditor");m.J.callback(b.C(h,a,m.D,m.ea,m.O,d))})}r(Xae,y);
function Yae(a,b){var c=boc(),d=new Zu(LS.concat(["waffle-dataconnector-connection-selected"])),e=new Zu(["waffle-dataconnector-active-sheet-db-connection","embedded-object-unfocused"]),f=LS.concat(["waffle-dataconnector-active-sheet-db-connection","sheet-access-no-protected-range-for-sheet"]);c||f.push("waffle-dataconnector-active-sheet-not-plx");c=new Zu(f);Iub.Na(!0);b.C(QE,MS).F(QE,MS).C(RE,MS).F(RE,MS).C(Sub,c).C(Lub,c).C(SE,MS).C(Tub,d).C(Qub,c).C(Uub,c).C(Nub,e);b.C(Mub,c);a.V.xb(Mub,Qa,function(){a.H.refresh()});
I(H(),"fedp")&&b.C(Kub,MS).F(Kub,MS)}function Zae(a){a.V.subscribe(Iub,"action",function(){C$d(a.C)}).subscribe(SE,"action",a.pvb).subscribe(QE,"action",a.qkb).subscribe(Kub,"action",a.pkb).subscribe(Sub,"action",a.twb).subscribe(Lub,"action",a.Bna).subscribe(RE,"action",a.Fmb).subscribe(Qub,"action",a.Htb).subscribe(Uub,"action",a.Bna).subscribe(Hub,"action",a.Etb)}p=Xae.prototype;p.tf=function(a){this.D.tf(a)};p.mlb=function(){var a=A$d(this.C);a&&a.isVisible()||(SE.setValue(null),Tub.setValue(null))};
p.eMa=function(a){var b=this;a=void 0===a?!1:a;var c=new t$d;this.va(c);D4(this.C,c,!a);c.getResult().then(function(c){var d=a,f=c.getId();c=c.getName();if(d){C$d(b.C);d=A$d(b.C);d.xc=f;d.Sa=!0;-1!=he(e$d(d)).indexOf("A managed data source is missing under query settings")&&G4(d,bd("span"));var h=d.L;h.F=c;fe(h.Ja("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),c);Jk(h.Ja("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),"waffle-dataconnector-jdbc-query-settings-widget-connection-name-error",
!1);d.L.Cd(!0);d.Yd.J(f);K$d(d.kb);d.kH()}else $ae(b,f,c)},function(){C$d(b.C)})};p.n2a=function(){var a=abe("Connecting to Plx...");bbe(this);ar($q.getInstance(),a)};p.m2a=function(){var a=this,b=abe("Connecting to BigQuery...");n$d(new m$d(this.D)).then(function(c){ar($q.getInstance(),b);cbe(a,c)},function(){ar($q.getInstance(),b);dbe("Could not connect to BigQuery")})};p.jPb=function(){ebe(this,[],!1)};
function cbe(a,b){b=new T9d(b);var c=new j$d(b);a.va(c);D4(a.C,c);c.getResult().then(function(b){fbe(a,b)},function(){a.O.C(35753);A(c)})}function abe(a){return $q.getInstance().postMessage(br(a,"info",!0))}function dbe(a){$q.getInstance().postMessage(br(a,"error",!0))}function $ae(a,b,c){a.J.addCallback(function(d){d=d.Nab(b,c);a.va(d);D4(a.C,d)})}function fbe(a,b){a.J.addCallback(function(c){c=c.Mab(b);a.va(c);D4(a.C,c)})}
function bbe(a){a.J.addCallback(function(b){b=b.Oab();a.va(b);D4(a.C,b)})}
p.pvb=function(a){var b=A$d(this.C);b.Ta=!0;G4(b,Zc("Executing query"));iae(b);dae(b);var c=T(a,1);Pae(Oae(Sae(this.xa,a),function(a){if(!b.isDisposed()){b.O.stop();b.O.dD();gae(b,!1);b.Ta=!1;b.eb=c;var d=1E4<T(a,3)||!!T(a,4);b.fc=d;if(!b.isDisposed()){d=b.fc;var f=T(a,3);d=d?T(a,4)?"Query returns more than "+(g$d.format(f)+(" rows of data. Please revise your query to return no more than "+(g$d.format(1E4)+" rows."))):"Query returns "+(g$d.format(f)+(" rows of data. Please revise your query to return no more than "+
(g$d.format(1E4)+" rows."))):(new Uu("{TOTAL_ROWS, plural, =0 {Query returns no results.}=1 {Query returns 1 row of data.}other {Query returns # rows of data.}}")).format({TOTAL_ROWS:f});d=bd("strong",void 0,d);d=cd(d,bd("br"),sae);G4(b,d)}b.J.APb(T(a,2));bae(b);b.ma.setContent("Refresh preview");iae(b)}}),function(a){b.isDisposed()||fae(b,a)}).start()};p.qkb=function(a){gbe(this,1,a)};p.pkb=function(a){gbe(this,2,a)};
function gbe(a,b,c){var d=A$d(a.C);U(c,2,b);K9d(a.D,c).then(function(c){hbe(a,c);2==b&&ODb()},function(a){d.isDisposed()||fae(d,a)});kae(d)}function hbe(a,b){x$d(a.L,T(b,2),b.ej());var c=b.jb();B$d(a.C);UK(a.F,c)?XK(a.F.C)==c?a.H.refresh():ZK(a.F,c,void 0,{aD:!0}):a.La.Jc(a.F,["vb","kb"],function(b){"vb"==b.type&&b.Bh==c&&ZK(a.F,c,void 0,{aD:!0})})}p.twb=function(){ebe(this,[wN(this.F.C)],!0)};
function ebe(a,b,c){var d=new h$c;b.forEach(function(a){Fv(d,1,a)});M9d(a.D,d).then(function(b){ibe(a,Hv(b,1));a.H.refresh()},function(b){return jbe(a,b,c)})}function jbe(a,b,c){var d=[],e=[];Hv(b,1).forEach(function(a){return 3==a.ej().getState()?e.push(a):d.push(a)});ibe(a,d);a.H.refresh();c&&(b=e[0],c=b.ej(),c.getErrorCode(),kbe(a,b.jb(),c))}function ibe(a,b){b.forEach(function(b){var c=UK(a.F,b.jb());if(c=c&&c.H)c=T(c,1),b=b.ej(),a.L.C[c]=b})}
function kbe(a,b,c){var d=UK(a.F,b),e=d&&d.H;if(e){d=d.re();e=ritz_api.DbxApi.getTypeOfQuery(T(e,1));var f="waffle-dataconnector-ssologin-"+$b(),h=Wae(c,e,d,f);a.va(h);a.ea.Lh(h);h.render();h.setVisible(!0);h.getResult().then(function(){A(h);a.Bna(b)},function(){A(h)});(c=Fd(f))&&C4.prototype.getHandler.call(h).R(c,"click",function(){lbe(a,b,h)})}}function lbe(a,b,c){$$d(a.ma,function(){A(c);ebe(a,[b],!0)})}
p.Bna=function(a){if((a=void 0!==a?UK(this.F,a):this.F.C.C)&&sJ(a)){var b=a.H;a=T(b,1);switch(ritz_api.DbxApi.getTypeOfQuery(a)){case 2:mbe(this,a);break;case 1:b=T(b,2);nbe(this,b,a);break;case 3:obe(this,a)}}};
function nbe(a,b,c){var d=pbe(a,c),e=qbe(a,b),f=rbe(a,c);a.J.addCallback(function(h){var k=abe("Loading query...");Te([d,e,f]).then(function(d){var e=d[0],f=d[1]?d[1]:null;f=f?f.getName():null;d=h.Rab(b,f,c,e,d[2]?d[2]:null);a.va(d);ar($q.getInstance(),k);D4(a.C,d)},function(){ar($q.getInstance(),k);dbe("Could not load query")})})}
function mbe(a,b){var c=pbe(a,b),d=rbe(a,b);a.J.addCallback(function(e){var f=abe("Loading query...");Te([c,d]).then(function(c){c=e.Sab(b,c[0],c[1]?c[1]:null);a.va(c);ar($q.getInstance(),f);D4(a.C,c)},function(){ar($q.getInstance(),f);dbe("Could not load query")})})}
function obe(a,b){var c=n$d(new m$d(a.D)),d=pbe(a,b),e=rbe(a,b);a.J.addCallback(function(f){var h=abe("Connecting to BigQuery...");Te([d,e,c]).then(function(c){var d=c[0],e=c[1]?c[1]:null;c=c[2];var k=T(d,4).Gm();c=new T9d(c,k);d=f.Qab(c,b,d,e);ar($q.getInstance(),h);D4(a.C,d)},function(){ar($q.getInstance(),h);dbe("Could not load query")})})}function pbe(a,b){var c=Ue(),d=new E$c;U(d,1,b);P9d(a.D,d).then(function(a){c.resolve(T(a,2))},function(a){return c.reject(a)});return c.C}
function qbe(a,b){var c=Ue(),d=new L$c;U(d,1,b);R9d(a.D,d).then(function(a){c.resolve(T(a,1))},function(){return c.resolve(null)});return c.C}function rbe(a,b){var c=y$d(a.L,b);if(!c||3!=c.getState())return Re(null);c=new I$c;U(c,1,b);return a.D.ej(c).then(function(a){return a.ej()})}
p.Fmb=function(a){var b=this,c=T(a,1),d=A$d(this.C);N9d(this.D,a).then(function(a){a=a.ej();b.L.C[c]=a;a=ritz_api.DbxApi.getSheetIdForQuery(c);ZK(b.F,a,void 0,{aD:!0});B$d(b.C);b.H.refresh()},function(a){d.isDisposed()||fae(d,a)});kae(d)};p.Htb=function(){var a=this,b=this.F.C.C,c=T(b.H,1),d=new I$c;U(d,1,c);this.D.ej(d).then(function(c){(c=c.ej())&&3==c.getState()&&kbe(a,b.jb(),c)})};p.Etb=function(){gr("https://cloud.google.com/bigquery/docs/projects")};p.nqb=function(){this.eMa(!0)};function sbe(){y.call(this)}r(sbe,iE);sbe.prototype.C=function(){return Xae};qE("dataconnector",sbe);

rw.prototype.wq=ea(45,g("reason"));U2a.prototype.wq=ea(44,g("C"));FD.prototype.wq=ea(43,function(){return T(this,2)});function Gme(a,b){xo(a.C,8192)?b():(zp(a.gP,a.ma,function(){b()}),a.create())}function Hme(a){a.O=!0;return a}function r5(a){nf(this,a,0,-1,null,null)}w(r5,mf);r5.prototype.wq=function(){return F(this,1)};function Ime(a){nf(this,a,0,-1,null,null)}w(Ime,mf);function Jme(a){nf(this,a,0,-1,null,null)}w(Jme,mf);Jme.prototype.getId=function(){return F(this,1)};
Jme.prototype.kf=function(a){G(this,1,a)};Jme.prototype.getType=function(){return F(this,2)};Jme.prototype.setType=function(a){G(this,2,a)};function Kme(a){nf(this,a,0,-1,null,null)}w(Kme,mf);function Lme(){try{return!!ma.localStorage.getItem("docs-uoo")}catch(a){return!0}}function Mme(a){a?ma.localStorage.setItem("docs-wownoi","true"):ma.localStorage.removeItem("docs-wownoi")}function Nme(a){a?ma.localStorage.setItem("docs-rops","true"):ma.localStorage.removeItem("docs-rops")}
function Ome(a){a?ma.localStorage.setItem("docs-ropd","true"):ma.localStorage.removeItem("docs-ropd")}function Pme(a,b){this.e8=a;this.gN=b};function Qme(a,b,c,d,e){y.call(this);this.Wa=a;this.H=b;this.O=d?d:"DefaultLocalStoreSessionId";this.L=e||new HNa;this.J=c;this.D=this.dd=null;this.F=new xp;this.va(this.F);this.C=Rme(this)}w(Qme,y);function Rme(a){a.C&&A(a.C);var b=dh(H(),"lssv");return new MNa(a.Wa,a.O,0,a.j2a.bind(a),b,!0,a.J,new FMa)}function Sme(a){if(a.D)return a.D;a.D=Tme(a);return We(a.D,function(b){a.V9();throw b;})}
function Ume(a){return Sme(a).then(function(a){return(new Pe(function(b,d){AIa(a.XP(),b,d)})).then(function(b){return 1==b.length&&b[0].getId()==eh(H(),"docs-offline-lsuid")?new Pme(a,b[0]):null}.bind(this))}.bind(a))}p=Qme.prototype;p.get=function(){return Ume(this).then(function(a){if(!a)throw Error("Must be exactly one user and they must be the current user");return a.e8})};function Tme(a){return(new Pe(function(a,c){$e(this.C.create(this.V9.bind(this)),a,c)}.bind(a))).then(a.frb.bind(a))}
p.frb=function(a){var b=this;if(!a)throw Error("Got null localstore from the idb localstore factory.");if(this.H){var c=new tLa(a,this.H);this.va(c)}KFa(a);yp(this.F,a.C.C.H,function(){b.V9()});yp(this.F,a.C.ma,function(){b.V9()});return a};p.V9=function(){A(this.C);this.C=Rme(this);this.D=null};p.j2a=function(a){return $La(this.L,a)};p.Ha=function(){A(this.C);Qme.oa.Ha.call(this)};function Vme(){return P('<div><div>Turn on offline to access files without an Internet connection.</div><div class="docs-offline-optindialog-short-disclaimer">Not recommended on public or shared computers. <a href="#" id="docs-offline-optindialog-disclaimer-link" tabindex="0" class="docs-offline-optindialog-disclaimer-link">Learn more</a></div><div id="docs-offline-optindialog-disclaimer" class="docs-offline-optindialog-disclaimer" style="display:none;" tabindex="0">Protect your files by enabling offline access only on personal computers or computers where you have a password protected account. Enabling offline access on public or shared computers can put your data at risk, since others may be able to view your synced Google documents, spreadsheets and presentations.</div></div>')}
;function Wme(a){Ft.call(this);this.O=a;gt(this,"Turn on offline for all files?");a=new ot;tt(a,{key:"docs-offline-editor-enable-offline-dialog-cancel",caption:"Cancel"},!1,!0);tt(a,{key:"docs-offline-editor-enable-offline-dialog-turnon",caption:"Turn on"},!0,!1);rt(this,a);qt(this,!1);this.Di=this.qs=!0;a=new k1c;ht(this,vs(l1c(a,Vme)));this.C=this.F=null}w(Wme,Ft);
Wme.prototype.Ia=function(){Wme.oa.Ia.call(this);yt(this,this.D.ov);this.F=me(this.qa(),"docs-offline-optindialog-disclaimer-link");this.C=me(this.qa(),"docs-offline-optindialog-disclaimer");this.getHandler().R(this,"dialogselect",this.J).Jc(this.F,"click",this.L)};Wme.prototype.J=function(a){"docs-offline-editor-enable-offline-dialog-turnon"==a.key&&this.O();this.setVisible(!1)};Wme.prototype.L=function(){J(this.F,"docs-offline-optindialog-disclaimer-link-disabled");K(this.C,!0);this.C.focus()};function Xme(a,b,c,d){E.call(this);this.F=a;this.xa=b;this.L=c;this.O=new Hr(this.L,Gr(),this);this.Wa=d;this.H=Ue();this.D=this.C=null;this.J=!1}w(Xme,E);Xme.prototype.start=function(){var a=this;Yme(this,"Initialization").then(function(){a.J=!0;a.H.resolve(null);a.O.R(nLa,a.ea).R(bLa,a.ma).R(eLa,a.V)},function(b){a.H.resolve(ze(b))})};function Zme(a){return a.H.C.then(function(a){if(null!=a)throw a;})}
Xme.prototype.ea=function(a){a=xf(a,lLa,1);for(var b=0;b<a.length;b++){var c=a[b].Oz(rLa);if(c&&F(c,1)==this.F&&pf(c,3).includes(1)){$me(this,"Document data changed");break}}};Xme.prototype.ma=function(a){F(a,1)==this.F&&$me(this,"Document available")};Xme.prototype.V=function(){$me(this,"Offline disabled")};function $me(a,b){We(Yme(a,b),function(b){Zo(a.Wa,ze(b))})}
function Yme(a,b){return We(ane(a.xa,[a.F]).then(function(b){var c=!1,e=!1;1==b.length&&(e=b[0],c=F(e,7),e=F(e,8));var f=b=!1;a.J&&(b=a.C!=c,f=a.D!=e);a.C=c;a.D=e;b&&a.dispatchEvent("yg");f&&a.dispatchEvent("zg")}),function(a){throw Ae(a,{pinStatusUpdateReason:b});})};function bne(){E.call(this);this.C=3;this.D=null;this.H=!1;this.F=Ue()}w(bne,E);function cne(a){return a.F.C.then(function(a){if(null!=a)throw a;})}bne.prototype.HB=g("D");function dne(a,b,c){if((1==b||2==b)&&!c)throw Error("Eligibility must be provided when transitioning to ENABLED or DISABLED. New state: "+b);c&&(a.D=c);a.C=b;a.F.resolve(null);a.dispatchEvent("Ag")}function ene(a){if(!a.D)return!1;a=a.D.wq();return 1==a||6==a};function fne(a,b,c,d,e,f,h,k,l,m,q){y.call(this);this.Pa=a;this.Qa=b;this.$a=c;this.F=d;this.D=e;this.Wa=k;this.Da=new nr;this.La=new Mk(this);this.va(this.La);this.Ta=a.C;this.ea=f;this.eb=h;this.H=this.C=null;this.L=l;this.Sa=m;this.Fa=q;this.Ka=new xp;this.va(this.Ka);this.O=gne(this,"Document now available offline");this.ma=gne(this,"Document no longer available offline");this.V=gne(this,"Could not change offline availability.");this.J=gne(this,"Could not enable offline access.");this.Ma=gne(this,
"Making document available offline...");this.xa=gne(this,"Document will sync when you reconnect");this.Xa=gne(this,"Could not sync document.")}w(fne,y);function gne(a,b){return du(a.L,b,void 0,!1,3E3,!1,void 0,!0)}p=fne.prototype;p.init=function(){var a=this;Te([cne(this.D),Zme(this.F)]).then(function(){hne(a);ine(a);(Rj(),Lh).setVisible(B.product.Ze)},function(b){a.Wa.Nc(ze(b))})};
function hne(a){(Rj(),Lh).subscribe("action",a.XFa,a);a.La.R(a.F,"yg",a.Tub).R(a.F,"zg",a.ptb).R(a.D,"Ag",a.rtb);yp(a.Ka,a.Fa.C,function(){ine(a)})}p.XFa=function(){jne(this)};
function jne(a){gKa(a.Da).then(function(){if(fr()){if(1==a.D.C)return kne(a);ene(a.D)?lne(a):mne(a,a.J)}else{a.H&&a.H.setVisible(!1);var b=tt(tt(new ot,{key:"ok",caption:"Install"},!0),wt,!1,!0),c=a.ea,d=l0c("Extension needed","To make this document available offline, install the Docs Offline Chrome extension to your browser.",a.b5a,null,a,void 0,b,void 0);c.Lh(d);d.focus();a.H=d;yt(a.H,b.ov)}})}
p.b5a=function(){var a=this;this.Da.install().then(function(b){b&&jne(a)},function(b){b=ze(b);a.Wa.Nc(b);FJa(b)})};function kne(a){var b=!(Rj(),Lh).Ed(),c=a.Sa.Jh();b&&!a.F.D&&mne(a,c?a.Ma:a.xa);return We((new Pe(function(b){Gme(a.Ta,b)})).then(function(){return nne(a,b,c)}),function(b){mne(a,a.V);a.Wa.log(ze(b))})}function one(a){We(pne(a.eb),function(b){a.Wa.log(ze(b))}).then(function(){if(1==a.D.C)return kne(a);mne(a,a.J)})}
function lne(a){a.C||(a.C=new Wme(function(){return one(a)}),a.ea.Lh(a.C),a.La.R(a.C,"hide",function(){a.C=null}),a.C.setVisible(!0))}function nne(a,b,c){var d=new Jme;d.kf(a.Pa.F);d.setType(a.Qa);return qne(a.$a,[d],b,c).then(function(b){b&&(F(b,1)||mne(a,a.Xa))})}p.Tub=function(){ine(this);rne(this);this.F.C||mne(this,this.ma)};p.ptb=function(){rne(this)};p.rtb=function(){ine(this)};function rne(a){1==a.D.C&&a.F.D&&a.F.C&&mne(a,a.O)}
function mne(a,b){a.O.setVisible(!1);a.ma.setVisible(!1);a.V.setVisible(!1);a.J.setVisible(!1);a.Ma.setVisible(!1);a.xa.setVisible(!1);b.rb()||b.render();b.setVisible(!0)}function ine(a){var b=a.Fa.getState()==(jp(),gBa);(Rj(),Lh).Na(!b&&(1==a.D.C||ene(a.D)));Lh.Vb(a.F.C)}
p.Ha=function(){(Rj(),Lh).unsubscribe("action",this.XFa,this);this.C&&(fv(this.ea,this.C),A(this.C));this.H&&(fv(this.ea,this.H),A(this.H));fne.oa.Ha.call(this);fu(this.L,this.O);fu(this.L,this.ma);fu(this.L,this.V);fu(this.L,this.J);yb(this.O,this.ma,this.V,this.J)};function sne(a){this.D=a}sne.prototype.C=function(a){var b=new H2c;I2c(b,a.serialize());this.D.log(b);this.D.H()};function tne(a){this.D=a}tne.prototype.C=function(a){var b=new H2c;I2c(b,a.serialize());this.D.log(b);return new Pe(function(a,b){this.D.flush(a,b)}.bind(this))};function une(a){this.D=a}une.prototype.C=function(a,b,c){Ume(this.D).then(u(function(d){d?(new aCc(d.e8,"offline",null)).C(a,b,c):b()},this))};function vne(a,b,c){a='<div><div id="docs-offline-optinpromo-title">You\'re all set</div><div id="docs-offline-optinpromo-description">Your work will sync once you\'re online again. Then you\'ll be able to keep editing offline.</div><div class="docs-offline-optinpromo-confirm-buttons">'+O(At({id:"docs-offline-optinpromo-confirm-close",content:Ns("Close")},c||b));return P(a+"</div></div>")};function wne(a){E.call(this);this.bb=a||Cd();this.La=new Mk(this);this.va(this.La);this.C=new Ws(a);this.C.pA(!1);Fn(this.C.D,!1);this.C.Dd("docs-offline-optinpromo");this.C.render();a=this.C.Oa();ge(a,!0);zk(a,"dialog");Ak(a,"labelledby","docs-offline-optinpromo-title");Ak(a,"describedby","docs-offline-optinpromo-description");this.va(this.C);this.L=new Bt(null);this.va(this.L);this.J=new Bt(null);this.va(this.J);this.H=new Bt(null);this.va(this.H);this.O=this.F=this.D=null;xne(this,yne)}w(wne,E);
function yne(a,b,c){b=c||b;a='<div><div id="docs-offline-optinpromo-title">Work offline and don\'t miss a beat</div><div id="docs-offline-optinpromo-description"><div>Access your Docs, Sheets and Slides files when you\'re offline, or your internet connection isn\'t great.</div><div class="docs-offline-optinpromo-notice">Not recommended on public or shared computers. <a href="#" id="docs-offline-optinpromo-link-learn-more">Learn More</a><a href="#" id="docs-offline-optinpromo-link-show-less" style="display: none">Show less</a></div></div><div id="docs-offline-optinpromo-learn-more-container" style="display: none" tabindex="0"><hr>Protect your Google Drive by enabling offline access only on personal computers or computers where you have a password protected account. Enabling offline access on public or shared computers can put your data at risk, since others may be able to view your synced Google documents, spreadsheets and presentations.<hr></div><br>'+
O(At({id:"docs-offline-optinpromo-optin",content:Ns("Turn on offline access"),style:2},b));a+=O(At({id:"docs-offline-optinpromo-decline",content:Ns("No thanks"),style:0},b));return P(a+"</div>")}
function xne(a,b){var c=N(b);a.C.setContent(c);switch(b){case yne:a.La.R(a.C,"show",a.gvb);b=a.bb.getElement("docs-offline-optinpromo-optin");a.L.Va(b);a.La.Jc(a.L,"action",u(a.Ptb,a));b=a.bb.getElement("docs-offline-optinpromo-decline");a.J.Va(b);a.La.Jc(a.J,"action",u(a.Zkb,a));a.D=a.bb.getElement("docs-offline-optinpromo-link-learn-more");a.F=a.bb.getElement("docs-offline-optinpromo-link-show-less");a.O=a.bb.getElement("docs-offline-optinpromo-learn-more-container");a.La.R(a.D,"click",u(a.SOa,
a,!0)).R(a.F,"click",u(a.SOa,a,!1));break;case vne:b=a.bb.getElement("docs-offline-optinpromo-confirm-close");a.H.Va(b);a.La.Jc(a.H,"action",u(a.show,a,!1));a.C.Oa().focus();break;default:throw Error("Cannot handle state "+b);}a.bb.getElement("docs-offline-optinpromo-title");a.bb.getElement("docs-offline-optinpromo-description")}p=wne.prototype;p.SOa=function(a){K(this.D,!a);K(this.F,a);K(this.O,a);(a?this.F:this.D).focus();return!1};p.Ptb=function(){this.dispatchEvent(new D("Cg"))};p.Zkb=function(){this.dispatchEvent(new D("Dg"))};
p.show=function(a){this.C.setVisible(a);a||this.dispatchEvent(new D("Eg"))};p.gvb=function(){this.C.Oa().focus();this.dispatchEvent(new D("Bg"))};function zne(a,b){this.L=a;this.H=b}function Ane(a){return Bne(a).then(a.C.bind(a)).then(a.D.bind(a)).then(a.F.bind(a)).then(function(){var a=new r5;G(a,1,1);return a},a.J.bind(a))}zne.prototype.J=function(a){if(a instanceof r5)return a;if(a instanceof Error)throw a;throw Error(a);};
function Bne(a){var b=new r5;return a.L.get().then(function(a){var c=a.C;switch(c){case 3:case 2:return Re();case 4:return G(b,1,3),G(b,2,a.D),Se(b);case 1:return G(b,1,2),Se(b);case 5:return G(b,1,4),Se(b);default:throw Error("Unexpected enabled state: "+c);}})}zne.prototype.D=function(){return(new Pe(function(a,b){this.H.C(a,b)}.bind(this))).then(function(a){if(a)return Re();a=new r5;G(a,1,5);return Se(a)})};zne.prototype.C=function(){if(fr())return Re();var a=new r5;G(a,1,6);return Se(a)};
zne.prototype.F=function(){var a=dh(H(),"docs-offline-mrs");if(!a)throw Error("missing minRequiredSpace information");return new Pe(function(b,c){xdb(function(d,e){e>a?b():(d=new r5,G(d,1,7),G(d,3,a),G(d,4,e),c(d))},c)})};function Cne(a,b,c){this.C=a;this.D=c||null};function Dne(a,b){this.C=a;this.Wa=b}Dne.prototype.get=function(){return Ume(this.C).then(function(a){return a?new Cne(1,a.gN.getId(),a.gN.EF(),Ene(this)):Sme(this.C).then(function(a){return(new Pe(function(b,d){AIa(a.XP(),b,d)})).then(function(a){if(a.length)if(1==a.length)a=a[0],a=new Cne(4,a.getId(),a.EF());else throw Error("More than one user in store: "+a.length);else a=Lme()?new Cne(2):HLa()?new Cne(5):new Cne(3);return a}.bind(this))}.bind(this))}.bind(this))};
function Ene(a){a=new feb(a.Wa);var b=H(),c=I(b,"docs-dbsw"),d=[];c&&I(b,"docs-offline-esmst")&&d.push(new ux("metadata-sync",0,!0,new tx(1,Bo(),wx("metadata"),3E5,!0,!0)));c&&I(b,"docs-offline-esbst")&&d.push(new ux("service-worker-update",0,!0,new tx(2,aza(),wx("service_worker_update"),3E5,!0,!1)),A$a());I(b,"docs-offline-edswut")&&d.push(new ux("drive-service-worker",0,!0,new tx(2,bza(eh(H(),"drdn"),"/drive/serviceworker/update",!0),wx("drive_service_worker_update"),3E5,!0,!0)));I(b,"docs-offline-eshcst")&&
d.push(new ux("homescreen-cello-sync",dh(H(),"docs-offline-scstpim"),!0,new tx(2,bza(Tn(ma.location.href),"/document/backgroundsync"),new vx,3E5,!0,!0)));I(b,"docs-offline-esdcst")&&d.push(new ux("drive-cello-sync",dh(H(),"docs-offline-scstpim"),!0,new tx(2,bza(eh(H(),"drdn"),"/drive/_/dataservice/backgroundsync",!0),new vx,3E5,!0,!0)));c&&I(b,"docs-offline-eslcst")&&d.push(new ux("local-changes-sync",0,!1,new tx(1,Bo(),wx("local_changes_sync"),3E5,!0,!1)));c&&I(b,"docs-offline-esast")&&!I(b,"docs-offline-eoasks")&&
d.push(new ux("auto-sync",dh(H(),"docs-offline-sastpim"),!1,new tx(1,Bo(),wx("auto_sync"),3E5,!0,!0)));c&&I(b,"docs-offline-eswst")&&d.push(new ux("webfonts-sync",0,!0,new tx(1,Bo(),wx("webfonts_sync"),3E5,!0,!0)));c&&I(b,"docs-offline-esist")&&d.push(new ux("impression-sync",0,!1,new tx(1,Bo(),wx("impressionSync"),3E5,!0,!1)));c&&I(b,"docs-offline-esddt")&&d.push(new ux("document-deletion",0,!1,new tx(1,Bo(),wx("doc_deletion"),3E5,!1,!1)));c&&I(b,"docs-offline-esuuct")&&d.push(new ux("update-unsaved-changes",
0,!1,new tx(2,aza(),wx("update_unsaved_changes"),3E5,!1,!1)));c&&I(b,"docs-offline-esct")&&d.push(new ux("cleanup-task",0,!1,new tx(2,aza(),wx("cleanup"),3E5,!1,!1)));c&&I(b,"docs-offline-esrt")&&d.push(new ux("report-task",0,!1,new tx(2,aza(),wx("report"),3E5,!1,!1)));c&&I(b,"docs-offline-eskst")&&d.push(new ux("kix-snapshot",0,!1,new tx(1,bza(Tn(ma.location.href),"/document/snapshot.js"),new vx,3E5,!1,!1)));c&&I(b,"docs-offline-esost")&&d.push(new ux("sync-objects-sync",0,!0,new tx(1,Bo(),wx("sync_objects_sync"),
3E5,!0,!0)));b=[];for(c=0;c<d.length;c++){var e=d[c];e.C&&b.push(e)}for(d=0;d<b.length;d++)if(c=Ndb(a,b[d].getId()),!c||!qf(c,5,!1))return!1;return!0};function Fne(a){this.C=a}function Gne(a,b){var c=(c=a.C.getItem("optInLog"))?JSON.parse(c):[];c.push({email:b,timestamp:Fa()});a.C.setItem("optInLog",Ao(c))}function Hne(){var a=ma.localStorage;if(!a)throw Error("Local storage not available");return new Fne(a)};function Ine(a,b,c){this.H=a;this.C=[8];this.F=b;this.D=c}function Jne(a){return Sme(a.H).then(function(a){return Kne(this,a).then(function(){var b=XNa();if(!b)throw Error("Missing user info for enabling offline in flags.");return Lne(this,a,b)}.bind(this))}.bind(a)).then(function(a){return Mne(this,a)}.bind(a))}function Kne(a,b){return(new Pe(function(a,d){AIa(b.XP(),a,d)}.bind(a))).then(function(a){if(a&&a.length)throw Error("Aborting opt-in because there is another user in LocalStorage.");})}
function Lne(a,b,c){var d=new tFa(F(c,1),!0);uFa(d,c.EF());vFa(d,F(c,3));wFa(d,!!F(c,4));xFa(d,!!F(c,6));Vp(d,"optInReasons",a.C);return(new Pe(function(a,c){b.write([d],a,c)}.bind(a))).then(function(){return d})}
function Mne(a,b){Gne(Hne(),b.EF()||"");ma.localStorage&&(ma.localStorage.removeItem("docs-uoo"),ma.localStorage.setItem("docs-oiouid",b.getId()));b=new sr;var c=new cLa;oga(b,ur,c);sLa(a.F,b);b=new nr;var d=new YNa(b);return cKa(b).then(function(){return new Pe(function(a,b){d.C(a,b)})}.bind(a)).then(function(a){var b=ZNa(),c=new Iwa;this.C[0]&&G(c,1,vIa(this.C[0]));G(c,10,a);G(c,11,b);a=this.D.Vz(81E3,0);b=Hx(a);yf(b,34,c);this.D.Wz(a)}.bind(a))};function Nne(a,b,c,d,e,f,h){y.call(this);this.bb=h||Cd();this.D=a;this.Wa=b;this.H=c;this.eb=d;a=new eOa;this.va(a);this.F=new vr(a,Gr());this.va(this.F);this.Ka=new Hr(this.F,Gr(),this);this.va(this.Ka);this.Da=new Hr(this.F,null,this);this.va(this.Da);this.L=new Qme(this.Wa,this.F,e,"OfflinePromoControllerLockSessionId");this.va(this.L);e=new Dne(this.L,this.Wa);a=new nr;this.$a=new zne(e,new YNa(a));e=this.L;b=H();a=I(b,"docs-offline-ecpl")?"https://jmt17.google.com/log":void 0;b=eh(b,"gaia_session_id");
a=new V2c(306,b||null,a,!(Ba(ma)&&ma.window==ma)||!ma.document||!ma.document.documentElement,!0);b=new tne(a);e=B.product.Ze&&GMa&&(cOa()||dOa())?new une(e):new $Bc;e=new YBc(b,null,e);a=new sne(a);b=eNa();e=$ab(Zab(Hme(Xab(Wab(new Vab,e),a)),b),84).build();a=Sab(e.GC());b=(new XBc(!1)).get();a.H=b;this.Pa=e;this.Pa.dH();this.Qa=Lr(this.bb);this.C=null;this.La=new Mk(this);this.va(this.La);this.V=new xp;this.va(this.V);this.ea=new $l(this.Eob,6E4,this);this.va(this.ea);this.Sa=!1;this.ma=this.J=null;
this.Fa=$q.getInstance();this.O=this.Ta=!1;this.xa=B.product.Ze&&B.product.Hg("56.0.2924.87");this.Ma=!1;this.Xa=f}w(Nne,y);p=Nne.prototype;p.init=function(){var a=this;fr()&&(One(this),Pne(this),s5(this).then(function(){Qne(a)},function(b){a.Wa.Nc(ze(b))}))};function Qne(a){a.F.connect();yp(a.V,a.D.kK(),function(){a.ea.start();s5(a)});yp(a.V,a.D.lK(),function(){a.ea.stop();One(a);Pne(a);s5(a)});a.La.R(a.Qa,"change",a.e5a);a.Ka.R(ur,a.d5a);a.Da.R(ur,a.c5a).R(gLa,a.$gb)}
function s5(a){return Ane(a.$a).then(function(b){var c=1==b.wq(),d=a.D.Jh(),e;if(!(e=a.O)&&(e=!Lme())){try{var f=!!ma.localStorage.getItem("docs-urop")}catch(k){f=!0}e=!f}f=I(H(),"promo_show_on_load");if((c=c&&a.xa&&e)&&!(c=!d)){try{var h=!!ma.localStorage.getItem("docs-wownoi")}catch(k){h=!1}c=h&&!f}h=c;a.Ta||(h?a.C||(a.C=new wne(a.bb),a.va(a.C),a.La.R(a.C,"Cg",a.Qtb).R(a.C,"Dg",a.Mtb).R(a.C,"Eg",a.h3a),a.C.show(!0),Rne(a)):a.C&&a.C.show(!1));if(a.eb)if(2==b.wq()||d||h)Sne(a);else if(a.ma&&!Cf(b,
a.ma)&&Sne(a),null==a.J){d=Tne(b);if(!a.Ma)switch(b.wq()){case 1:break;case 3:Une(a,"Offline ineligible, other user enabled");break;case 7:Une(a,"Offline ineligible, insufficient disk space");break;case 5:Une(a,"Offline ineligible, policy disallows");break;case 6:Une(a,"Offline ineligible, no extension");break;case 4:Une(a,"Offline ineligible, invalid db state");break;default:Une(a,"Offline ineligible, unknown reason")}b=1==b.wq()&&a.xa?cr(d,"Turn on...",a.Evb.bind(a),"info",!1):br(d,"info",!1);a.J=
a.Fa.postMessage(b)}})}p.Eob=function(){GLa()||Mme(!0)};
p.Rtb=function(){if(this.D.Jh()){var a=eh(H(),"docs-offline-hsu");var b="<div>";a="The next time you're offline, just visit "+('<a href="//'+Q(a)+'">'+(O(a)+("</a> to create and edit without interruption. "+('<a href="'+Q(Ts("https://support.google.com/docs/answer/2375012?hl=en"))+'">Learn more</a>'))));b=P(b+a+'</div><img class="doc-offline-welcomepromo-img" src="//ssl.gstatic.com/images/icons/material/system/2x/cloud_download_googblue_36dp.png">');b=qSa("Your documents are syncing",vs(b),void 0,
this,"Got it","docs-offline-welcomepromo",this.bb);J(b.Ro(),"docs-offline-welcomepromo-bg");this.va(b);this.C&&this.C.show(!1)}else this.Ta=!0,xne(this.C,vne);s5(this)};p.d5a=function(){s5(this)};p.c5a=function(){s5(this)};p.$gb=function(){this.O=!1;s5(this)};p.Otb=function(a){this.Wa.Nc(a instanceof Error?a:Error(a?"Opt-in error: "+a:"Unknown opt-in error"));a=du(this.Xa,"Turning on offline access failed. Please try again later.",this.bb);a.D=!0;a.render();a.setVisible(!0);this.va(a)};
p.Qtb=function(){this.H.C(2054);Mme(!1);Jne(new Ine(this.L,this.F,this.Pa)).then(u(this.Rtb,this),u(this.Otb,this))};p.Mtb=function(){this.D.Jh()?this.H.C(2055):Ome(!0);Mme(!1);ma.localStorage.setItem("docs-urop","true");this.O=!1;s5(this);var a=new sr,b=new fLa;oga(a,gLa,b);sLa(this.F,a)};
function Tne(a){switch(a.wq()){case 1:return"To edit offline, turn on offline sync.";case 3:return"You cannot edit offline because offline sync is enabled for another user, "+(F(a,2)+".");case 7:return"There is insufficient storage space on your device to turn on offline sync.";case 5:return"Offline sync is disabled by your administrator.";default:return"To edit offline, turn on offline sync when you reconnect."}}
function Une(a,b){var c={};c.offlineIssueReason=b;c.offlineIssueType="OFFLINE_EDITING_BLOCKED_OFFLINE_DISABLED";Zo(a.Wa,Error("Offline editing disabled: "+b),c);a.Ma=!0}function Sne(a){null!=a.J&&(ar(a.Fa,a.J),a.J=null,a.ma=null)}p.Evb=function(){this.O=!0;s5(this)};p.e5a=function(){Rne(this)};p.h3a=function(){A(this.C);this.C=null};function Rne(a){!a.Sa&&a.C&&"hidden"!=a.Qa.getState()&&(a.D.Jh()?a.H.C(2847):Nme(!0),a.Sa=!0)}
function One(a){try{var b=!!ma.localStorage.getItem("docs-rops")}catch(c){b=!1}b&&a.D.Jh()&&(Nme(!1),a.H.C(2847))}function Pne(a){try{var b=!!ma.localStorage.getItem("docs-ropd")}catch(c){b=!1}b&&a.D.Jh()&&(Ome(!1),a.H.C(2055))};function Vne(a,b,c){y.call(this);this.C=a;this.Ta=c;this.J=new xp;this.va(this.J);this.Fa=new Hr(b,Gr(),this);this.va(this.Fa);this.La=new Mk(this);this.va(this.La);this.D=Lr();this.va(this.D);this.L=!1;this.Da=I(H(),"docs-offline-eraoi");this.Pa=I(H(),"docs-offline-eeooip");this.xa=I(H(),"docs-offline-eiid");this.Qa=new nr;this.ea=null;this.ma=this.O=this.V=!1;this.H=new $l(this.Ma,Math.floor(27E4*Math.random())+3E4,this);this.va(this.H);this.F=[]}r(Vne,y);
Vne.prototype.init=function(){var a=this;(this.Da||this.Pa)&&this.Fa.R(ur,this.Sa);this.xa&&(Wne(this).then(function(b){a.ea=b}),this.La.R(this.D,"change",this.Ka));this.F.push(new Xne("reload-after-opt-in","Reload to allow offline editing.","docs-offline-reload-after-opt-in-butter-dismiss"));this.F.push(new Xne("reload-after-extension-installation","The Docs Offline extension has been enabled. Reload to take effect.","docs-offline-reload-after-installation-butter-dismiss"))};
function Yne(a){a.ma||(yp(a.J,a.C.kK(),function(){return Zne(a)}),yp(a.J,a.C.lK(),function(){return Zne(a)}),a.xa||a.La.R(a.D,"change",a.Ka),a.ma=!0)}Vne.prototype.Sa=function(){this.L||(this.L=!0,Yne(this),this.Da&&("visible"==this.D.getState()||this.H.yb()||this.H.start()),Zne(this))};
function Zne(a){var b=!1;a.F.forEach(function(c){var d;if(d=!b){d=!1;switch(c.L){case "reload-after-opt-in":d=a.L&&a.C.Jh();break;case "reload-after-extension-installation":d=a.V&&a.C.Jh()}d=d&&!c.F}d?($ne(c),b=!0):null!=c.C&&(ar(c.H,c.C),c.C=null)})}Vne.prototype.Ma=function(){this.O||!this.C.Jh()||xo(this.Ta.QP(),256)||ma.location.reload()};
Vne.prototype.Ka=function(){var a=this,b="visible"==this.D.getState();this.O||(this.O=b&&this.F.some(function(a){return null!=a.C}));b&&0==this.ea&&!this.V&&Wne(this).then(function(b){b&&(a.V=!0,Yne(a),Zne(a))})};function Wne(a){return gKa(a.Qa).then(function(){return fr()})}
function Xne(a,b,c){y.call(this);var d=this;this.L=a;this.J=b;this.F=!1;this.C=null;this.H=$q.getInstance();this.D=new we(c);this.va(this.D);this.D.setProperty("label","Dismiss");this.D.Na(!0);this.D.xb(Ra,function(){d.F=!0})}r(Xne,y);function $ne(a){null==a.C&&(a.C=a.H.postMessage(cr(a.J,"Reload",function(){ma.location.reload()},"info",!0,void 0,a.D)))};function aoe(a,b,c,d,e,f,h){y.call(this);this.dd=null;this.D=b;this.J=Ue();boe(this);this.F=this.H=null;this.O=a;this.C=c;this.La=new Mk(this);this.va(this.La);this.L=new xp;this.va(this.L);this.V=d;this.ea=e;this.xa=f;this.ma=h}w(aoe,y);p=aoe.prototype;p.start=function(){var a=this;coe(this.D).then(function(b){b.connect();a.J.resolve(b);return doe(a)}).then(function(){yp(a.L,a.O.lK(),function(){eoe(a)})},function(b){b=ze(b);a.C.F.resolve(b)})};
function pne(a){if(2!=a.C.C)throw Error("Cannot enable offline when it is not disabled. Current state:"+a.C.C);dne(a.C,4);return foe(a.D,10).then(function(a){var b=a.wq();return Re().then(function(){return 1==b||2==b?t5(this,1):t5(this,2)}.bind(this)).then(function(){return a})}.bind(a))}p.HB=function(){return this.D.HB()};
function doe(a){return a.D.H().then(function(b){switch(F(b,1)){case 1:return goe(a.D).then(function(){return t5(this,1)}.bind(a)).then(function(){eoe(this)}.bind(a));case 2:return t5(a,2);case 4:return hoe(a,F(b,2));case 3:return b=F(b,3),null!=b?ioe(a,b):t5(a,2);case 5:return joe(a)}})}p.EAb=function(a){1==this.C.C&&!this.C.H&&0==F(a,2)&&We(this.D.H().then(function(a){var b=this.C;a=F(a,5);b.H=a;b.dispatchEvent("Ag")}.bind(this)),ba().bind(this))};function hoe(a){return t5(a,2)}
function ioe(a,b){return a.ea?foe(a.D,b).then(function(a){switch(a.wq()){case 1:return t5(this,1);case 2:return t5(this,1);default:return t5(this,2)}}.bind(a)):Re()}function joe(a){return a.xa?foe(a.D,2).then(function(a){switch(a.wq()){case 1:case 2:return t5(this,1);default:return t5(this,2)}}.bind(a)):Re()}
function boe(a){a.J.C.then(function(a){this.H=new Hr(a,"user_"+this.V,this);this.va(this.H);this.F=new Hr(a,null,this);this.va(this.F);this.H.R(ur,this.g5a).R(eLa,this.gtb).R(iLa,this.EAb);this.F.R(ur,this.f5a).R(eLa,this.Zgb)}.bind(a))}p.g5a=function(){We(t5(this,1),ba().bind(this))};p.gtb=function(){We(t5(this,2),ba().bind(this))};p.f5a=function(){koe(this)};p.Zgb=function(){koe(this)};
function t5(a,b){return a.HB().then(function(a){dne(this.C,b,a)}.bind(a)).then(function(){return this.D.H().then(function(a){var b=this.C;a=F(a,5);b.H=a;b.dispatchEvent("Ag")}.bind(this))}.bind(a)).then(ba().bind(a))}function koe(a){a.HB().then(function(a){var b=this.C;b.D=a;b.dispatchEvent("Ag")}.bind(a))}function eoe(a){a.ma&&1==a.C.C&&We(loe(a.D),ba().bind(a))};function moe(a){this.D=a}moe.prototype.C=g("D");function u5(a){nf(this,a,0,-1,null,null)}w(u5,mf);u5.prototype.getType=function(){return F(this,1)};u5.prototype.setType=function(a){G(this,1,a)};function noe(a){nf(this,a,0,-1,null,null)}w(noe,mf);noe.prototype.getType=function(){return F(this,1)};noe.prototype.setType=function(a){G(this,1,a)};noe.prototype.eK=function(){return wf(this,ooe,2)};function ooe(a){nf(this,a,0,-1,null,null)}w(ooe,mf);ooe.prototype.getType=function(){return F(this,1)};ooe.prototype.setType=function(a){G(this,1,a)};
ooe.prototype.getErrorMessage=function(){return F(this,2)};function poe(a){nf(this,a,0,-1,qoe,null)}w(poe,mf);var qoe=[1];function roe(a){nf(this,a,0,-1,soe,null)}w(roe,mf);var soe=[1];function toe(a){nf(this,a,0,-1,null,null)}w(toe,mf);toe.prototype.H=function(){return wf(this,Ime,1)};function uoe(a){nf(this,a,0,-1,null,null)}w(uoe,mf);uoe.prototype.HB=function(){return wf(this,r5,1)};function voe(a){nf(this,a,0,-1,null,null)}w(voe,mf);function woe(a){nf(this,a,0,-1,null,null)}w(woe,mf);
woe.prototype.HB=function(){return wf(this,r5,1)};function xoe(a){nf(this,a,0,-1,null,null)}w(xoe,mf);xoe.prototype.getId=function(){return F(this,1)};xoe.prototype.kf=function(a){G(this,1,a)};xoe.prototype.getTitle=function(){return F(this,2)};xoe.prototype.uq=function(){return F(this,3)};function yoe(a){nf(this,a,0,-1,zoe,null)}w(yoe,mf);var zoe=[1];function Aoe(a){nf(this,a,0,-1,null,null)}w(Aoe,mf);function Boe(a,b,c,d){y.call(this);this.F=Ue();this.bb=d||Cd();this.dd=null;this.La=new Mk(this);this.va(this.La);this.J=a;a=new io(b);a.hc("ouid",this.J);cza()&&a.hc("Debug","true");oo(a,"cd="+c);if(Lb(a.C))throw Error("Url contains invalid domain: "+b);this.L=lo(ko(jo(new io,a.H),a.C),a.J).toString();this.C=this.bb.Ca("IFRAME",{style:"display:none"});ada(this.C,lr(a.toString()));this.La.R(pe(this.bb),"message",this.O);this.bb.wb().body.appendChild(this.C);this.D=!1}w(Boe,y);
function coe(a){var b=new u5;b.setType(1);return v5(a,b).then(function(a){a=new vr(new moe(a.port),"user_"+this.J);this.va(a);return a}.bind(a))}function ane(a,b){var c=new u5;c.setType(2);var d=new poe;G(d,1,b||[]);yf(c,2,d);return v5(a,c).then(function(a){return xf(wf(a.response,roe,3),xoe,1)}.bind(a))}Boe.prototype.H=function(){var a=new u5;a.setType(4);return v5(this,a).then(function(a){return wf(a.response,toe,4).H()}.bind(this))};
Boe.prototype.HB=function(){var a=new u5;a.setType(10);return v5(this,a).then(function(a){return wf(a.response,uoe,7).HB()}.bind(this))};function qne(a,b,c,d){d=void 0===d?!1:d;var e=new u5;e.setType(5);var f=new yoe;zf(f,1,b);G(f,2,c);G(f,3,d);yf(e,3,f);return v5(a,e).then(function(a){return(a=wf(a.response,Aoe,8))&&wf(a,Kme,1)||null})}function foe(a,b){var c=new u5;c.setType(6);var d=new voe;G(d,1,b);yf(c,4,d);return v5(a,c).then(function(a){return wf(a.response,woe,5).HB()})}
function goe(a){var b=new u5;b.setType(9);return v5(a,b).then(ba())}function loe(a){var b=new u5;b.setType(11);return v5(a,b).then(ba())}
function v5(a,b){return a.F.C.then(function(a){var c=Fa(),e=new MessageChannel;a.postMessage(b.vg(),[e.port2]);var f=Ue();e.port1.onmessage=u(function(a){a=new Coe(a);a.response&&a.response.eK()?(a=a.response.eK(),f.reject(Error("Iframe api request of type "+b.getType()+" failed (error type "+a.getType()+"): "+a.getErrorMessage()))):f.resolve(a)},this);var h=Sl(function(){f.reject(Error("Iframe api request of type "+b.getType()+" timed out after "+(Fa()-c)+"ms."))},na(void 0)?void 0:3E4);Ve(f.C,function(){e.port1.close();
Tl(h)});return f.C}.bind(a))}Boe.prototype.O=function(a){(a=a.$d())&&a.origin==this.L&&a.source==this.C.contentWindow&&!this.D&&(a.ports&&a.ports.length&&a.ports[0]&&(a=a.ports[0],wb(this,a.close,a),this.F.resolve(a),this.D=!0),A(this.La))};Boe.prototype.Ha=function(){this.bb.Ef(this.C);Boe.oa.Ha.call(this)};function Coe(a){this.response=a.data?new noe(a.data):null;this.port=a.ports&&a.ports.length&&a.ports[0]?a.ports[0]:null};function Doe(a,b,c,d,e,f,h,k,l,m,q){var t=this;y.call(this);var v=H();this.F=eh(v,"docs-offline-lsuid");this.J=new eOa;this.C=new vr(this.J,Gr());this.va(this.C);this.C.connect();this.H=h;this.Wa=b;var z=I(v,"docs-offline-eeooip");if(z||I(v,"docs-offline-eraoi")||I(v,"docs-offline-eiid")){var C=new Vne(a,this.C,e.C);this.va(C);C.init()}z&&(b=new Nne(a,b,c,d,h,l,q),this.va(b),b.init());this.D=new bne;this.va(this.D);var L=I(v,"docs-offline-eiedp")&&(!I(v,"docs-isd")||I(v,"docs-offline-esdp")),R=I(v,
"docs-offline-eiecr");Eoe(this,L,R).then(function(b){if(b){b=$ya("/iframeapi",void 0);b=new Boe(t.F,b,1);t.va(b);var c=new aoe(a,b,t.D,t.F,!1,R,!1);t.va(c);c.start();if(L){var d=new Xme(e.F,b,t.C,t.Wa);t.va(d);d.start();b=new fne(e,f,b,d,t.D,k,c,t.Wa,l,a,m);t.va(b);b.init()}}})}w(Doe,y);function Eoe(a,b,c){return b?Re(!0):c?(b=new Qme(a.Wa,a.C,a.H,"EditorOfflineControllerLockSessionId"),a.va(b),(new Dne(b,a.Wa)).get().then(function(a){return 5==a.C},function(b){a.Wa.Nc(ze(b))})):Re(!1)};function Foe(){y.call(this)}w(Foe,iE);Foe.prototype.C=function(a,b,c,d,e,f,h,k,l,m){return new Doe(a,b,c,!0,d,e,f,h,k,l,m)};qE("offline",Foe);
